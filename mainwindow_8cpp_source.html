<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Qt Slideshow Manager (QSM): mainwindow.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="qsm64.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Qt Slideshow Manager (QSM)&#160;<span id="projectnumber">1.0</span></div>
   <div id="projectbrief">Fast slideshow manager build on Qt. Copyright Â© 2010 Alexander Vos and Till Althaus.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<div class="title">mainwindow.cpp</div>  </div>
</div>
<div class="contents">
<a href="mainwindow_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/****************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment">**</span>
<a name="l00003"></a>00003 <span class="comment">** Copyright (C) 2011 Alexander Vos &lt;alexander.vos@stud.fh-swf.de&gt;,</span>
<a name="l00004"></a>00004 <span class="comment">**                    Till Althaus &lt;till.althaus@stud.fh-swf.de&gt;</span>
<a name="l00005"></a>00005 <span class="comment">**</span>
<a name="l00006"></a>00006 <span class="comment">** This file is part of Qt Slideshow Manager (QSM).</span>
<a name="l00007"></a>00007 <span class="comment">**</span>
<a name="l00008"></a>00008 <span class="comment">** QSM is free software: you can redistribute it and/or modify</span>
<a name="l00009"></a>00009 <span class="comment">** it under the terms of the GNU General Public License as published by</span>
<a name="l00010"></a>00010 <span class="comment">** the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00011"></a>00011 <span class="comment">** (at your option) any later version.</span>
<a name="l00012"></a>00012 <span class="comment">**</span>
<a name="l00013"></a>00013 <span class="comment">** QSM is distributed in the hope that it will be useful,</span>
<a name="l00014"></a>00014 <span class="comment">** but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment">** MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00016"></a>00016 <span class="comment">** GNU General Public License for more details.</span>
<a name="l00017"></a>00017 <span class="comment">**</span>
<a name="l00018"></a>00018 <span class="comment">** You should have received a copy of the GNU General Public License</span>
<a name="l00019"></a>00019 <span class="comment">** along with QSM.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00020"></a>00020 <span class="comment">**</span>
<a name="l00021"></a>00021 <span class="comment">****************************************************************************/</span>
<a name="l00022"></a>00022 
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="mainwindow_8h.html">mainwindow.h</a>&quot;</span>
<a name="l00024"></a>00024 <span class="preprocessor">#include &quot;ui_mainwindow.h&quot;</span>
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="preprocessor">#include &lt;climits&gt;</span>
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="preprocessor">#include &lt;QLabel&gt;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &lt;QSettings&gt;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &lt;QMessageBox&gt;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &lt;QFileSystemModel&gt;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &lt;QThreadPool&gt;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &lt;QInputDialog&gt;</span>
<a name="l00034"></a>00034 <span class="preprocessor">#include &lt;QDesktopServices&gt;</span>
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;QUrl&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;QClipboard&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;QWheelEvent&gt;</span>
<a name="l00038"></a>00038 
<a name="l00039"></a>00039 <span class="preprocessor">#include &lt;QDebug&gt;</span>
<a name="l00040"></a>00040 
<a name="l00041"></a>00041 <span class="preprocessor">#include &quot;<a class="code" href="scanfolderthread_8h.html">scanfolderthread.h</a>&quot;</span>
<a name="l00042"></a>00042 <span class="preprocessor">#include &quot;<a class="code" href="imagelistmodel_8h.html">imagelistmodel.h</a>&quot;</span>
<a name="l00043"></a>00043 <span class="preprocessor">#include &quot;<a class="code" href="slideshowlistmodel_8h.html">slideshowlistmodel.h</a>&quot;</span>
<a name="l00044"></a>00044 <span class="preprocessor">#include &quot;<a class="code" href="slideshowfilemanager_8h.html">slideshowfilemanager.h</a>&quot;</span>
<a name="l00045"></a>00045 <span class="preprocessor">#include &quot;<a class="code" href="imagewidget_8h.html">imagewidget.h</a>&quot;</span>
<a name="l00046"></a>00046 <span class="preprocessor">#include &quot;<a class="code" href="slideshowwindow_8h.html">slideshowwindow.h</a>&quot;</span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &quot;<a class="code" href="optionsdialog_8h.html">optionsdialog.h</a>&quot;</span>
<a name="l00048"></a>00048 
<a name="l00049"></a><a class="code" href="class_main_window.html#a8b244be8b7b7db1b08de2a2acb9409db">00049</a> <a class="code" href="class_main_window.html#a8b244be8b7b7db1b08de2a2acb9409db" title="Constructs a new MainWindow with the given parent.">MainWindow::MainWindow</a>(QWidget *parent) :
<a name="l00050"></a>00050     QMainWindow(parent),
<a name="l00051"></a>00051     ui(new Ui::<a class="code" href="class_main_window.html" title="The MainWindow class defines the main application window.">MainWindow</a>),
<a name="l00052"></a>00052     m_currentSlideshow(NULL),
<a name="l00053"></a>00053     m_currentSlideshowImage(NULL)
<a name="l00054"></a>00054 {
<a name="l00055"></a>00055     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;setupUi(<span class="keyword">this</span>);
<a name="l00056"></a>00056     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;menuView-&gt;insertAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionStatusbar, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;mainToolBar-&gt;toggleViewAction());
<a name="l00057"></a>00057     QMenu *menuSidebar = <span class="keyword">new</span> QMenu(tr(<span class="stringliteral">&quot;&amp;Sidebar&quot;</span>), <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;menuView);
<a name="l00058"></a>00058     menuSidebar-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;folderBrowserDockWidget-&gt;toggleViewAction());
<a name="l00059"></a>00059     menuSidebar-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListDockWidget-&gt;toggleViewAction());
<a name="l00060"></a>00060     menuSidebar-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListDockWidget-&gt;toggleViewAction());
<a name="l00061"></a>00061     menuSidebar-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListDockWidget-&gt;toggleViewAction());
<a name="l00062"></a>00062     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;menuView-&gt;insertMenu(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionStatusbar, menuSidebar);
<a name="l00063"></a>00063     connect(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionAboutQt, SIGNAL(triggered()), qApp, SLOT(aboutQt()));
<a name="l00064"></a>00064 
<a name="l00065"></a>00065     <a class="code" href="class_main_window.html#afa2586cbd7f8310c9ef2112cf3a0ac9a" title="The file system model.">m_folderBrowserModel</a> = <span class="keyword">new</span> QFileSystemModel(<span class="keyword">this</span>);
<a name="l00066"></a>00066     <a class="code" href="class_main_window.html#afa2586cbd7f8310c9ef2112cf3a0ac9a" title="The file system model.">m_folderBrowserModel</a>-&gt;setFilter(QDir::Drives | QDir::Dirs | QDir::NoDotAndDotDot);
<a name="l00067"></a>00067     <a class="code" href="class_main_window.html#afa2586cbd7f8310c9ef2112cf3a0ac9a" title="The file system model.">m_folderBrowserModel</a>-&gt;setRootPath(<a class="code" href="class_main_window.html#afa2586cbd7f8310c9ef2112cf3a0ac9a" title="The file system model.">m_folderBrowserModel</a>-&gt;myComputer().toString());
<a name="l00068"></a>00068 
<a name="l00069"></a>00069     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;folderBrowserTreeView-&gt;setModel(<a class="code" href="class_main_window.html#afa2586cbd7f8310c9ef2112cf3a0ac9a" title="The file system model.">m_folderBrowserModel</a>);
<a name="l00070"></a>00070     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;folderBrowserTreeView-&gt;expand(<a class="code" href="class_main_window.html#afa2586cbd7f8310c9ef2112cf3a0ac9a" title="The file system model.">m_folderBrowserModel</a>-&gt;index(QDir::rootPath()));
<a name="l00071"></a>00071     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;folderBrowserTreeView-&gt;setHeaderHidden(<span class="keyword">true</span>);
<a name="l00072"></a>00072     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;folderBrowserTreeView-&gt;hideColumn(1);
<a name="l00073"></a>00073     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;folderBrowserTreeView-&gt;hideColumn(2);
<a name="l00074"></a>00074     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;folderBrowserTreeView-&gt;hideColumn(3);
<a name="l00075"></a>00075 
<a name="l00076"></a>00076     <a class="code" href="class_main_window.html#abe0bef6ec39d09861919d26f404b9765" title="The thread to scan the folders in the background.">m_scanFolderThread</a> = <span class="keyword">new</span> <a class="code" href="class_scan_folder_thread.html" title="The ScanFolderThread class provides a simple interface to scan a folder (including all subfolders if ...">ScanFolderThread</a>(<span class="keyword">this</span>);
<a name="l00077"></a>00077     connect(<a class="code" href="class_main_window.html#abe0bef6ec39d09861919d26f404b9765" title="The thread to scan the folders in the background.">m_scanFolderThread</a>, SIGNAL(started()), SLOT(<a class="code" href="class_main_window.html#a750407a820eb5877e251ab5c466efd7c" title="Enables the button to abort the folder scanning and displayes a message to the user, which folder will be scanned for images.">scanFolderThread_started</a>()));
<a name="l00078"></a>00078     connect(<a class="code" href="class_main_window.html#abe0bef6ec39d09861919d26f404b9765" title="The thread to scan the folders in the background.">m_scanFolderThread</a>, SIGNAL(folderScanned(QString, QFileInfoList)), SLOT(<a class="code" href="class_main_window.html#a30dfbce9e4d492474fd6bf61a23819b8" title="Adds all found images to the image list and displayes a message to the user, which folder was scanned...">scanFolderThread_folderScanned</a>(QString, QFileInfoList)));
<a name="l00079"></a>00079     connect(<a class="code" href="class_main_window.html#abe0bef6ec39d09861919d26f404b9765" title="The thread to scan the folders in the background.">m_scanFolderThread</a>, SIGNAL(finished()), SLOT(<a class="code" href="class_main_window.html#a8314363bb8c59832a400c5a443c2e124" title="Disables the button to abort the folder scanning and displayes a message to the user, how many folders has been scanned and how many images has been found.">scanFolderThread_finished</a>()));
<a name="l00080"></a>00080 
<a name="l00081"></a>00081     <a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a> = <span class="keyword">new</span> <a class="code" href="class_image_list_model.html" title="The ImageListModel class provides a model of multiple images which can be presented to the user with ...">ImageListModel</a>(<span class="keyword">this</span>);
<a name="l00082"></a>00082     connect(<a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>, SIGNAL(changed()), SLOT(<a class="code" href="class_main_window.html#a4fea70b2d5a1ec4b9c7a29585f16fe0c" title="Shows the found and already loaded image count to the user.">imageListModel_changed</a>()));
<a name="l00083"></a>00083     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;setModel(<a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>);
<a name="l00084"></a>00084     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionAddToSlideshow);
<a name="l00085"></a>00085     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRenameImage);
<a name="l00086"></a>00086     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCutImage);
<a name="l00087"></a>00087     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImage);
<a name="l00088"></a>00088     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage);
<a name="l00089"></a>00089     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImageFromDisk);
<a name="l00090"></a>00090     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyPath);
<a name="l00091"></a>00091     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOpenFileLocation);
<a name="l00092"></a>00092     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportImages);
<a name="l00093"></a>00093     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPreloadAllImages);
<a name="l00094"></a>00094 
<a name="l00095"></a>00095     <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a> = <span class="keyword">new</span> <a class="code" href="class_slideshow_list_model.html" title="The SlideshowListModel class provides a model of multiple slideshows which can be presented to the us...">SlideshowListModel</a>(<span class="keyword">this</span>);
<a name="l00096"></a>00096     connect(<a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>, SIGNAL(slideshowRenamed(QString,QString)), SLOT(<a class="code" href="class_main_window.html#a08476875c2f25c23714ee399fd41e2dd" title="Renames the actual slideshow file on the disk.">slideshowListModel_slideshowRenamed</a>(QString,QString)));
<a name="l00097"></a>00097     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;setModel(<a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>);
<a name="l00098"></a>00098     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionStartSlideshow);
<a name="l00099"></a>00099     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSlideshowEditComment);
<a name="l00100"></a>00100     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRenameSlideshow);
<a name="l00101"></a>00101     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveSlideshow);
<a name="l00102"></a>00102     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImagesToSlideshow);
<a name="l00103"></a>00103     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOpenFileLocation);
<a name="l00104"></a>00104     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportAllImages);
<a name="l00105"></a>00105     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionReloadSlideshow);
<a name="l00106"></a>00106     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSaveSlideshow);
<a name="l00107"></a>00107 
<a name="l00108"></a>00108     <a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a> = <span class="keyword">new</span> <a class="code" href="class_image_list_model.html" title="The ImageListModel class provides a model of multiple images which can be presented to the user with ...">ImageListModel</a>(<span class="keyword">this</span>);
<a name="l00109"></a>00109     connect(<a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>, SIGNAL(changed()), SLOT(<a class="code" href="class_main_window.html#a74fb3bff1988b8ec32efa6d4e53c61f7" title="Shows the found and already loaded image count to the user.">slideshowImageListModel_changed</a>()));
<a name="l00110"></a>00110     connect(<a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>, SIGNAL(imageRenamed(QModelIndex,QString)), SLOT(<a class="code" href="class_main_window.html#a6e72a02b7472523ee44b47fb9eb5e088" title="Updates the reference of the renamed image path inside the current slideshow.">slideshowImageListModel_imageRenamed</a>(QModelIndex,QString)));
<a name="l00111"></a>00111     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;setModel(<a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>);
<a name="l00112"></a>00112     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionImageEditComment);
<a name="l00113"></a>00113     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRenameImage);
<a name="l00114"></a>00114     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCutImage);
<a name="l00115"></a>00115     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImage);
<a name="l00116"></a>00116     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage);
<a name="l00117"></a>00117     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImage);
<a name="l00118"></a>00118     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImageFromDisk);
<a name="l00119"></a>00119     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyPath);
<a name="l00120"></a>00120     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOpenFileLocation);
<a name="l00121"></a>00121     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportImages);
<a name="l00122"></a>00122     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveAllCorruptedImages);
<a name="l00123"></a>00123     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPreloadAllImages);
<a name="l00124"></a>00124 
<a name="l00125"></a>00125     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionAddToSlideshow);
<a name="l00126"></a>00126     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRotateClockwise);
<a name="l00127"></a>00127     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRotateCounterclockwise);
<a name="l00128"></a>00128     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomFit);
<a name="l00129"></a>00129     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomOriginal);
<a name="l00130"></a>00130     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomIn);
<a name="l00131"></a>00131     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomOut);
<a name="l00132"></a>00132     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionImageEditComment);
<a name="l00133"></a>00133     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCutImage);
<a name="l00134"></a>00134     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImage);
<a name="l00135"></a>00135     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImageFromDisk);
<a name="l00136"></a>00136     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyPath);
<a name="l00137"></a>00137     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOpenFileLocation);
<a name="l00138"></a>00138     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportImages);
<a name="l00139"></a>00139     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionShowComments);
<a name="l00140"></a>00140 
<a name="l00141"></a>00141     <a class="code" href="class_main_window.html#a8dfe8a33a5cf8c3727d3ed6fc3ecef97" title="The slideshow file manager to load and save slideshows.">m_slideshowFileManager</a> = <span class="keyword">new</span> <a class="code" href="class_slideshow_file_manager.html" title="The SlideshowFileManager class manages the communication between the Slideshows in memory and the fil...">SlideshowFileManager</a>(<span class="keyword">this</span>);
<a name="l00142"></a>00142     connect(<a class="code" href="class_main_window.html#a8dfe8a33a5cf8c3727d3ed6fc3ecef97" title="The slideshow file manager to load and save slideshows.">m_slideshowFileManager</a>, SIGNAL(started()), SLOT(<a class="code" href="class_main_window.html#ad3829b383b6e0730ecc50442f43b177e" title="Disables all save and load actions until all slideshows are loaded.">slideshowFileManager_started</a>()));
<a name="l00143"></a>00143     connect(<a class="code" href="class_main_window.html#a8dfe8a33a5cf8c3727d3ed6fc3ecef97" title="The slideshow file manager to load and save slideshows.">m_slideshowFileManager</a>, SIGNAL(slideshowLoaded(<a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a>)), <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>, SLOT(addSlideshow(<a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a>)));
<a name="l00144"></a>00144     connect(<a class="code" href="class_main_window.html#a8dfe8a33a5cf8c3727d3ed6fc3ecef97" title="The slideshow file manager to load and save slideshows.">m_slideshowFileManager</a>, SIGNAL(finished()), SLOT(<a class="code" href="class_main_window.html#a4698e044f81eada0c34765c846d0c7b0" title="Enables all save and load actions.">slideshowFileManager_finished</a>()));
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     <a class="code" href="class_main_window.html#ae56819b4295b17e1b20b6973c558f2b9" title="The scan folder label to display the current folder being scanned.">m_scanFolderLabel</a> = <span class="keyword">new</span> QLabel(<span class="keyword">this</span>);
<a name="l00147"></a>00147     <a class="code" href="class_main_window.html#ae56819b4295b17e1b20b6973c558f2b9" title="The scan folder label to display the current folder being scanned.">m_scanFolderLabel</a>-&gt;setVisible(<span class="keyword">false</span>);
<a name="l00148"></a>00148     statusBar()-&gt;addPermanentWidget(<a class="code" href="class_main_window.html#ae56819b4295b17e1b20b6973c558f2b9" title="The scan folder label to display the current folder being scanned.">m_scanFolderLabel</a>);
<a name="l00149"></a>00149     <a class="code" href="class_main_window.html#a9e14ad0b9ab84e513456ba15f168b4b0" title="The button to abort the folder scan.">m_scanFolderAbortButton</a> = <span class="keyword">new</span> QPushButton(tr(<span class="stringliteral">&quot;Abort&quot;</span>), <span class="keyword">this</span>);
<a name="l00150"></a>00150     <a class="code" href="class_main_window.html#a9e14ad0b9ab84e513456ba15f168b4b0" title="The button to abort the folder scan.">m_scanFolderAbortButton</a>-&gt;setVisible(<span class="keyword">false</span>);
<a name="l00151"></a>00151     connect(<a class="code" href="class_main_window.html#a9e14ad0b9ab84e513456ba15f168b4b0" title="The button to abort the folder scan.">m_scanFolderAbortButton</a>, SIGNAL(clicked()), SLOT(<a class="code" href="class_main_window.html#ab51253aeb070e9e21f334a9287ab1457" title="Aborts the running folder scan.">scanFolderAbortButton_clicked</a>()));
<a name="l00152"></a>00152     statusBar()-&gt;addPermanentWidget(<a class="code" href="class_main_window.html#a9e14ad0b9ab84e513456ba15f168b4b0" title="The button to abort the folder scan.">m_scanFolderAbortButton</a>);
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     connect(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;multipleUpPushButton, SIGNAL(customContextMenuRequested(QPoint)), SLOT(<a class="code" href="class_main_window.html#a95cc4f2efeb71df6c783271580400923" title="Shows a modal dialog to select the multiple move count.">multipleMoveCountDialog</a>()));
<a name="l00155"></a>00155     connect(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;multipleDownPushButton, SIGNAL(customContextMenuRequested(QPoint)), SLOT(<a class="code" href="class_main_window.html#a95cc4f2efeb71df6c783271580400923" title="Shows a modal dialog to select the multiple move count.">multipleMoveCountDialog</a>()));
<a name="l00156"></a>00156 
<a name="l00157"></a>00157     <a class="code" href="class_main_window.html#a9bb1f3b7f6b5360abfd2dc01fc1c8930" title="Loads all user specific settings and shortcuts from the file system.">loadSettings</a>();
<a name="l00158"></a>00158     <a class="code" href="class_main_window.html#ad0dc6312472c0380d0ff820d8cb58170" title="Reloads all Slideshows.">on_actionReloadAllSlideshows_triggered</a>(); <span class="comment">// start slideshow loading</span>
<a name="l00159"></a>00159 
<a name="l00160"></a>00160     statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;Ready&quot;</span>));
<a name="l00161"></a>00161 }
<a name="l00162"></a>00162 
<a name="l00163"></a><a class="code" href="class_main_window.html#a9bb1f3b7f6b5360abfd2dc01fc1c8930">00163</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a9bb1f3b7f6b5360abfd2dc01fc1c8930" title="Loads all user specific settings and shortcuts from the file system.">MainWindow::loadSettings</a>()
<a name="l00164"></a>00164 {
<a name="l00165"></a>00165     QSettings settings;
<a name="l00166"></a>00166 
<a name="l00167"></a>00167     <span class="comment">// window geometry and state</span>
<a name="l00168"></a>00168     restoreGeometry(settings.value(<span class="stringliteral">&quot;geometry&quot;</span>).toByteArray());
<a name="l00169"></a>00169     restoreState(settings.value(<span class="stringliteral">&quot;windowState&quot;</span>).toByteArray());
<a name="l00170"></a>00170 
<a name="l00171"></a>00171     <span class="comment">// image settings</span>
<a name="l00172"></a>00172     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListSortComboBox-&gt;setCurrentIndex(settings.value(<span class="stringliteral">&quot;imageSort&quot;</span>, 0).toInt());
<a name="l00173"></a>00173 
<a name="l00174"></a>00174     <span class="comment">// slideshow options</span>
<a name="l00175"></a>00175     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;intervalSpinBox-&gt;setValue(settings.value(<span class="stringliteral">&quot;interval&quot;</span>, 5).toInt());
<a name="l00176"></a>00176     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;randomCheckBox-&gt;setChecked(settings.value(<span class="stringliteral">&quot;random&quot;</span>, <span class="keyword">false</span>).toBool());
<a name="l00177"></a>00177     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;repeatCheckBox-&gt;setChecked(settings.value(<span class="stringliteral">&quot;repeat&quot;</span>, <span class="keyword">false</span>).toBool());
<a name="l00178"></a>00178     <a class="code" href="class_main_window.html#a79c340813751959f56c570b07082d6b2" title="The amount of positions to move the image(s).">m_multipleMoveCount</a> = settings.value(<span class="stringliteral">&quot;multipleMoveCount&quot;</span>, 5).toInt();
<a name="l00179"></a>00179 
<a name="l00180"></a>00180     <span class="comment">// thumbnail sizes</span>
<a name="l00181"></a>00181     <span class="keywordtype">int</span> imageListViewThumbnailSize = settings.value(<span class="stringliteral">&quot;imageListViewThumbnailSize&quot;</span>, 64).toInt();
<a name="l00182"></a>00182     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;setIconSize(QSize(imageListViewThumbnailSize, imageListViewThumbnailSize));
<a name="l00183"></a>00183     <span class="keywordtype">int</span> slideshowImageListViewThumbnailSize = settings.value(<span class="stringliteral">&quot;slideshowImageListViewThumbnailSize&quot;</span>, 64).toInt();
<a name="l00184"></a>00184     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;setIconSize(QSize(slideshowImageListViewThumbnailSize, slideshowImageListViewThumbnailSize));
<a name="l00185"></a>00185 
<a name="l00186"></a>00186     <span class="comment">// image view</span>
<a name="l00187"></a>00187     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setBackgroundColor(settings.value(<span class="stringliteral">&quot;backgroundColor&quot;</span>, <a class="code" href="class_options_dialog.html#a9c98fbb7a78bfd9fb9d498b22a4fcbca" title="The default background color of the image widget.">OptionsDialog::DEFAULT_BACKGROUND_COLOR</a>).value&lt;QColor&gt;());
<a name="l00188"></a>00188     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setTextBackgroundColor(settings.value(<span class="stringliteral">&quot;textBackgroundColor&quot;</span>, <a class="code" href="class_options_dialog.html#a404ca511f6553ed2015d459399a63af1" title="The default text background color of the image widget.">OptionsDialog::DEFAULT_TEXT_BACKGROUND_COLOR</a>).value&lt;QColor&gt;());
<a name="l00189"></a>00189     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setTextFont(settings.value(<span class="stringliteral">&quot;textFont&quot;</span>, <a class="code" href="class_options_dialog.html#a052dab11e0345b998bced7fa4b369b19" title="The default text font of the image widget.">OptionsDialog::DEFAULT_TEXT_FONT</a>).value&lt;QFont&gt;());
<a name="l00190"></a>00190     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setTextColor(settings.value(<span class="stringliteral">&quot;textColor&quot;</span>, <a class="code" href="class_options_dialog.html#a8734472908f8d734d144c66ea6eb73ae" title="The default text color of the image widget.">OptionsDialog::DEFAULT_TEXT_COLOR</a>).value&lt;QColor&gt;());
<a name="l00191"></a>00191     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionShowComments-&gt;setChecked(settings.value(<span class="stringliteral">&quot;showComments&quot;</span>, <span class="keyword">true</span>).toBool());
<a name="l00192"></a>00192 
<a name="l00193"></a>00193     <span class="comment">// slideshows and images directory</span>
<a name="l00194"></a>00194     <a class="code" href="class_main_window.html#ae0e239a4ad3e3c08e0ef7907f31f1e16" title="The directory where the slideshows are stored.">m_slideshowsDirectory</a> = settings.value(<span class="stringliteral">&quot;slideshowsDirectory&quot;</span>, <a class="code" href="class_options_dialog.html#a124b84b5954e83d1645be2fc03c47b43" title="The default slideshows directory to store all slideshows.">OptionsDialog::DEFAULT_SLIDESHOWS_DIRECTORY</a>).toString();
<a name="l00195"></a>00195     <a class="code" href="class_options_dialog.html#ad8d5c992fff80e2515f744ab8ad3f69c" title="Checks if a directory exists or creates it if create is set to true.">OptionsDialog::checkDirectory</a>(<a class="code" href="class_main_window.html#ae0e239a4ad3e3c08e0ef7907f31f1e16" title="The directory where the slideshows are stored.">m_slideshowsDirectory</a>);
<a name="l00196"></a>00196     <a class="code" href="class_main_window.html#a100e6a0d37e7269ebfefb4d8d82eabfc" title="The directory where the exported images are stored.">m_imagesDirectory</a> = settings.value(<span class="stringliteral">&quot;imagesDirectory&quot;</span>, <a class="code" href="class_options_dialog.html#a5ca0955d7262b1c4fd1c6b2cdebeb9e0" title="The default images directory to store all exported images.">OptionsDialog::DEFAULT_IMAGES_DIRECTORY</a>).toString();
<a name="l00197"></a>00197     <a class="code" href="class_options_dialog.html#ad8d5c992fff80e2515f744ab8ad3f69c" title="Checks if a directory exists or creates it if create is set to true.">OptionsDialog::checkDirectory</a>(<a class="code" href="class_main_window.html#a100e6a0d37e7269ebfefb4d8d82eabfc" title="The directory where the exported images are stored.">m_imagesDirectory</a>, <span class="keyword">true</span>, <span class="keyword">false</span>);
<a name="l00198"></a>00198 
<a name="l00199"></a>00199     <span class="comment">// window shortcuts</span>
<a name="l00200"></a>00200     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExit, QKeySequence::Quit);
<a name="l00201"></a>00201     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOptions, QKeySequence::Preferences);
<a name="l00202"></a>00202     <span class="comment">//OptionsDialog::DefaultShortcuts.insert(ui-&gt;actionOpenSlideshowsDirectory, 0);</span>
<a name="l00203"></a>00203     <span class="comment">//OptionsDialog::DefaultShortcuts.insert(ui-&gt;actionOpenImagesDirectory, 0);</span>
<a name="l00204"></a>00204     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionQsmHelp, QKeySequence::HelpContents);
<a name="l00205"></a>00205 
<a name="l00206"></a>00206     <span class="comment">// image shortcuts</span>
<a name="l00207"></a>00207     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionAddToSlideshow, Qt::Key_Space);
<a name="l00208"></a>00208     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionImageEditComment, Qt::Key_Insert);
<a name="l00209"></a>00209     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRenameImage, Qt::Key_F2);
<a name="l00210"></a>00210     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCutImage, QKeySequence::Cut);
<a name="l00211"></a>00211     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImage, QKeySequence::Copy);
<a name="l00212"></a>00212     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage, QKeySequence::Paste);
<a name="l00213"></a>00213     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImage, QKeySequence::Delete);
<a name="l00214"></a>00214     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImageFromDisk, Qt::ALT + Qt::Key_Delete);
<a name="l00215"></a>00215     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyPath, Qt::CTRL + Qt::SHIFT + Qt::Key_C);
<a name="l00216"></a>00216     <span class="comment">//OptionsDialog::DefaultShortcuts.insert(ui-&gt;actionOpenFileLocation, 0);</span>
<a name="l00217"></a>00217     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportImages, Qt::CTRL + Qt::Key_E);
<a name="l00218"></a>00218     <span class="comment">//OptionsDialog::DefaultShortcuts.insert(ui-&gt;actionRemoveAllCorruptedImages, 0);</span>
<a name="l00219"></a>00219     <span class="comment">//OptionsDialog::DefaultShortcuts.insert(ui-&gt;actionPreloadAllImages, 0);</span>
<a name="l00220"></a>00220 
<a name="l00221"></a>00221     <span class="comment">// slideshow shortcuts</span>
<a name="l00222"></a>00222     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionNewSlideshow,QKeySequence::New);
<a name="l00223"></a>00223     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionReloadAllSlideshows, Qt::CTRL + Qt::SHIFT + Qt::Key_F5);
<a name="l00224"></a>00224     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSaveAllSlideshows, Qt::CTRL + Qt::SHIFT + Qt::Key_S);
<a name="l00225"></a>00225     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionStartSlideshow, Qt::Key_MediaPlay);
<a name="l00226"></a>00226     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSlideshowEditComment, Qt::Key_Insert);
<a name="l00227"></a>00227     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRenameSlideshow, Qt::Key_F2);
<a name="l00228"></a>00228     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveSlideshow, QKeySequence::Delete);
<a name="l00229"></a>00229     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImagesToSlideshow, QKeySequence::Copy);
<a name="l00230"></a>00230     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportAllImages, Qt::CTRL + Qt::Key_E);
<a name="l00231"></a>00231     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionReloadSlideshow, QKeySequence::Refresh);
<a name="l00232"></a>00232     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSaveSlideshow, QKeySequence::Save);
<a name="l00233"></a>00233 
<a name="l00234"></a>00234     <span class="comment">// image view shortcuts</span>
<a name="l00235"></a>00235     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRotateClockwise, Qt::CTRL + Qt::Key_R);
<a name="l00236"></a>00236     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRotateCounterclockwise, Qt::CTRL + Qt::SHIFT + Qt::Key_R);
<a name="l00237"></a>00237     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomFit, Qt::CTRL + Qt::Key_0);
<a name="l00238"></a>00238     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomOriginal, Qt::CTRL + Qt::Key_1);
<a name="l00239"></a>00239     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomIn, QKeySequence::ZoomIn);
<a name="l00240"></a>00240     <a class="code" href="class_options_dialog.html#a235ff295d3a9458ee22a34718bb30e6d" title="Stores all default shortcuts.">OptionsDialog::DefaultShortcuts</a>.insert(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomOut, QKeySequence::ZoomOut);
<a name="l00241"></a>00241     <span class="comment">//OptionsDialog::DefaultShortcuts.insert(ui-&gt;actionShowComments, 0);</span>
<a name="l00242"></a>00242 
<a name="l00243"></a>00243     <a class="code" href="class_options_dialog.html#ae3636c981e2a3cd87d851c131264b97b" title="Loads all shortcuts from the user&#39;s settings file.">OptionsDialog::loadAllShortcuts</a>(settings);
<a name="l00244"></a>00244 }
<a name="l00245"></a>00245 
<a name="l00246"></a><a class="code" href="class_main_window.html#abb30531afee763d0586ee6323fd332e2">00246</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#abb30531afee763d0586ee6323fd332e2" title="Saves all user specific settings to the file system.">MainWindow::saveSettings</a>()
<a name="l00247"></a>00247 {
<a name="l00248"></a>00248     QSettings settings;
<a name="l00249"></a>00249     settings.setValue(<span class="stringliteral">&quot;geometry&quot;</span>, saveGeometry());
<a name="l00250"></a>00250     settings.setValue(<span class="stringliteral">&quot;windowState&quot;</span>, saveState());
<a name="l00251"></a>00251     settings.setValue(<span class="stringliteral">&quot;imageSort&quot;</span>, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListSortComboBox-&gt;currentIndex());
<a name="l00252"></a>00252     settings.setValue(<span class="stringliteral">&quot;interval&quot;</span>, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;intervalSpinBox-&gt;value());
<a name="l00253"></a>00253     settings.setValue(<span class="stringliteral">&quot;random&quot;</span>, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;randomCheckBox-&gt;isChecked());
<a name="l00254"></a>00254     settings.setValue(<span class="stringliteral">&quot;repeat&quot;</span>, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;repeatCheckBox-&gt;isChecked());
<a name="l00255"></a>00255     settings.setValue(<span class="stringliteral">&quot;multipleMoveCount&quot;</span>, <a class="code" href="class_main_window.html#a79c340813751959f56c570b07082d6b2" title="The amount of positions to move the image(s).">m_multipleMoveCount</a>);
<a name="l00256"></a>00256     settings.setValue(<span class="stringliteral">&quot;imageListViewThumbnailSize&quot;</span>, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;iconSize().width());
<a name="l00257"></a>00257     settings.setValue(<span class="stringliteral">&quot;slideshowImageListViewThumbnailSize&quot;</span>, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;iconSize().width());
<a name="l00258"></a>00258     settings.setValue(<span class="stringliteral">&quot;showComments&quot;</span>, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionShowComments-&gt;isChecked());
<a name="l00259"></a>00259 }
<a name="l00260"></a>00260 
<a name="l00261"></a><a class="code" href="class_main_window.html#a4e20a4a065fbb0e4d3532a45a0a91425">00261</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a4e20a4a065fbb0e4d3532a45a0a91425" title="Saves all changed slideshows and user settings to the disk.">MainWindow::closeEvent</a>(QCloseEvent *event)
<a name="l00262"></a>00262 {
<a name="l00263"></a>00263     <a class="code" href="class_main_window.html#ae1fd2ba4eccf8584d62bc34d4478de4d" title="Saves all Slideshows.">on_actionSaveAllSlideshows_triggered</a>();
<a name="l00264"></a>00264     <a class="code" href="class_main_window.html#abb30531afee763d0586ee6323fd332e2" title="Saves all user specific settings to the file system.">saveSettings</a>();
<a name="l00265"></a>00265     qApp-&gt;quit();
<a name="l00266"></a>00266     <a class="code" href="class_main_window.html#a4e20a4a065fbb0e4d3532a45a0a91425" title="Saves all changed slideshows and user settings to the disk.">QMainWindow::closeEvent</a>(event);
<a name="l00267"></a>00267 }
<a name="l00268"></a>00268 
<a name="l00269"></a><a class="code" href="class_main_window.html#ae98d00a93bc118200eeef9f9bba1dba7">00269</a> <a class="code" href="class_main_window.html#ae98d00a93bc118200eeef9f9bba1dba7" title="Destroys the MainWindow and frees all UI resources.">MainWindow::~MainWindow</a>()
<a name="l00270"></a>00270 {
<a name="l00271"></a>00271     <span class="keyword">delete</span> <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>;
<a name="l00272"></a>00272 }
<a name="l00273"></a>00273 
<a name="l00274"></a><a class="code" href="class_main_window.html#abffb5da22e4f345c1ea3828bdea0b4ed">00274</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#abffb5da22e4f345c1ea3828bdea0b4ed" title="Helper method to start the asynchronous folder scan.">MainWindow::scanFolder</a>(<span class="keyword">const</span> QModelIndex &amp;index, <span class="keywordtype">bool</span> includeSubfolders)
<a name="l00275"></a>00275 {
<a name="l00276"></a>00276     <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#abe0bef6ec39d09861919d26f404b9765" title="The thread to scan the folders in the background.">m_scanFolderThread</a>-&gt;isRunning()) {
<a name="l00277"></a>00277         <a class="code" href="class_main_window.html#ab51253aeb070e9e21f334a9287ab1457" title="Aborts the running folder scan.">scanFolderAbortButton_clicked</a>();
<a name="l00278"></a>00278         <a class="code" href="class_main_window.html#abe0bef6ec39d09861919d26f404b9765" title="The thread to scan the folders in the background.">m_scanFolderThread</a>-&gt;wait();
<a name="l00279"></a>00279     }
<a name="l00280"></a>00280     QDir::SortFlags sort;
<a name="l00281"></a>00281     <span class="keywordflow">switch</span> (<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListSortComboBox-&gt;currentIndex()) {
<a name="l00282"></a>00282     <span class="keywordflow">case</span> 0: sort = <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a9607749d725b5589f98648a8827bc0b7" title="Sort by name.">QDir::Name</a>; <span class="keywordflow">break</span>;
<a name="l00283"></a>00283     <span class="keywordflow">case</span> 1: sort = <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a9607749d725b5589f98648a8827bc0b7" title="Sort by name.">QDir::Name</a> | <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a1f94c1818f2b5d553f198ad20028ff82" title="Reverse sort order.">QDir::Reversed</a>; <span class="keywordflow">break</span>;
<a name="l00284"></a>00284     <span class="keywordflow">case</span> 2: sort = QDir::Time; <span class="keywordflow">break</span>;
<a name="l00285"></a>00285     <span class="keywordflow">case</span> 3: sort = QDir::Time | <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a1f94c1818f2b5d553f198ad20028ff82" title="Reverse sort order.">QDir::Reversed</a>; <span class="keywordflow">break</span>;
<a name="l00286"></a>00286     }
<a name="l00287"></a>00287     <a class="code" href="class_main_window.html#abe0bef6ec39d09861919d26f404b9765" title="The thread to scan the folders in the background.">m_scanFolderThread</a>-&gt;<a class="code" href="class_scan_folder_thread.html#a9cc2ea586327dac49c7ecfd8a1a41bac" title="Sets the folder to be scanned to path.">setFolder</a>(<a class="code" href="class_main_window.html#afa2586cbd7f8310c9ef2112cf3a0ac9a" title="The file system model.">m_folderBrowserModel</a>-&gt;filePath(index), sort, includeSubfolders);
<a name="l00288"></a>00288     <a class="code" href="class_main_window.html#abe0bef6ec39d09861919d26f404b9765" title="The thread to scan the folders in the background.">m_scanFolderThread</a>-&gt;start(QThread::NormalPriority);
<a name="l00289"></a>00289 }
<a name="l00290"></a>00290 
<a name="l00291"></a><a class="code" href="class_main_window.html#afb99dec90217ba557ba24ec15d27a09b">00291</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#afb99dec90217ba557ba24ec15d27a09b" title="Starts scanning the selected folder for images.">MainWindow::on_folderBrowserTreeView_clicked</a>(<span class="keyword">const</span> QModelIndex &amp;index)
<a name="l00292"></a>00292 {
<a name="l00293"></a>00293     <span class="keywordflow">if</span> (index.isValid())
<a name="l00294"></a>00294         <a class="code" href="class_main_window.html#abffb5da22e4f345c1ea3828bdea0b4ed" title="Helper method to start the asynchronous folder scan.">scanFolder</a>(index, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;includeSubfoldersCheckBox-&gt;isChecked());
<a name="l00295"></a>00295 }
<a name="l00296"></a>00296 
<a name="l00297"></a><a class="code" href="class_main_window.html#a750407a820eb5877e251ab5c466efd7c">00297</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a750407a820eb5877e251ab5c466efd7c" title="Enables the button to abort the folder scanning and displayes a message to the user, which folder will be scanned for images.">MainWindow::scanFolderThread_started</a>()
<a name="l00298"></a>00298 {
<a name="l00299"></a>00299     qDebug(<span class="stringliteral">&quot;scanFolderThread_started&quot;</span>);
<a name="l00300"></a>00300     <a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#ab48d21b2d4b8226ba5d6a09a35e37a1a" title="Removes all images from this model.">clear</a>();
<a name="l00301"></a>00301     statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;Scanning folder %1 ...&quot;</span>).arg(<a class="code" href="class_main_window.html#abe0bef6ec39d09861919d26f404b9765" title="The thread to scan the folders in the background.">m_scanFolderThread</a>-&gt;<a class="code" href="class_scan_folder_thread.html#a18e72024a4b8b1c5a0b41c4d177d06d5" title="Returns the current folder of this thread.">folder</a>()));
<a name="l00302"></a>00302     <a class="code" href="class_main_window.html#ae56819b4295b17e1b20b6973c558f2b9" title="The scan folder label to display the current folder being scanned.">m_scanFolderLabel</a>-&gt;clear();
<a name="l00303"></a>00303     <a class="code" href="class_main_window.html#ae56819b4295b17e1b20b6973c558f2b9" title="The scan folder label to display the current folder being scanned.">m_scanFolderLabel</a>-&gt;setVisible(<span class="keyword">true</span>);
<a name="l00304"></a>00304     <a class="code" href="class_main_window.html#a9e14ad0b9ab84e513456ba15f168b4b0" title="The button to abort the folder scan.">m_scanFolderAbortButton</a>-&gt;setText(tr(<span class="stringliteral">&quot;Abort&quot;</span>));
<a name="l00305"></a>00305     <a class="code" href="class_main_window.html#a9e14ad0b9ab84e513456ba15f168b4b0" title="The button to abort the folder scan.">m_scanFolderAbortButton</a>-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00306"></a>00306     <a class="code" href="class_main_window.html#a9e14ad0b9ab84e513456ba15f168b4b0" title="The button to abort the folder scan.">m_scanFolderAbortButton</a>-&gt;setVisible(<span class="keyword">true</span>);
<a name="l00307"></a>00307 }
<a name="l00308"></a>00308 
<a name="l00309"></a><a class="code" href="class_main_window.html#a30dfbce9e4d492474fd6bf61a23819b8">00309</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a30dfbce9e4d492474fd6bf61a23819b8" title="Adds all found images to the image list and displayes a message to the user, which folder was scanned...">MainWindow::scanFolderThread_folderScanned</a>(<span class="keyword">const</span> QString &amp;folder, <span class="keyword">const</span> QFileInfoList &amp;files)
<a name="l00310"></a>00310 {
<a name="l00311"></a>00311     qDebug() &lt;&lt; <span class="stringliteral">&quot;folderScanned: &quot;</span> &lt;&lt; folder &lt;&lt; <span class="stringliteral">&quot;, images found = &quot;</span> &lt;&lt; files.size();
<a name="l00312"></a>00312     <a class="code" href="class_main_window.html#ae56819b4295b17e1b20b6973c558f2b9" title="The scan folder label to display the current folder being scanned.">m_scanFolderLabel</a>-&gt;setText(tr(<span class="stringliteral">&quot;Scanning folder %1 ...&quot;</span>).arg(folder.left(100)));
<a name="l00313"></a>00313     <a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a944a85402c0d6acac1c9ec28939e8da6" title="Appends multiple images to this model.">addImages</a>(files);
<a name="l00314"></a>00314 }
<a name="l00315"></a>00315 
<a name="l00316"></a><a class="code" href="class_main_window.html#a8314363bb8c59832a400c5a443c2e124">00316</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a8314363bb8c59832a400c5a443c2e124" title="Disables the button to abort the folder scanning and displayes a message to the user, how many folders has been scanned and how many images has been found.">MainWindow::scanFolderThread_finished</a>()
<a name="l00317"></a>00317 {
<a name="l00318"></a>00318     qDebug(<span class="stringliteral">&quot;scanFolderThread_finished: %d images found&quot;</span>, <a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a58a6c21071ba24672f335b3fca40d02c" title="Returns the image count.">imageCount</a>());
<a name="l00319"></a>00319     statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;%1 images found, %2 folders scanned&quot;</span>)
<a name="l00320"></a>00320                              .arg(<a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a58a6c21071ba24672f335b3fca40d02c" title="Returns the image count.">imageCount</a>())
<a name="l00321"></a>00321                              .arg(<a class="code" href="class_main_window.html#abe0bef6ec39d09861919d26f404b9765" title="The thread to scan the folders in the background.">m_scanFolderThread</a>-&gt;<a class="code" href="class_scan_folder_thread.html#ace716fe648643a48314370d3fb87295f" title="Returns the number of folders already scanned by this thread.">count</a>()));
<a name="l00322"></a>00322     <a class="code" href="class_main_window.html#ae56819b4295b17e1b20b6973c558f2b9" title="The scan folder label to display the current folder being scanned.">m_scanFolderLabel</a>-&gt;setVisible(<span class="keyword">false</span>);
<a name="l00323"></a>00323     <a class="code" href="class_main_window.html#a9e14ad0b9ab84e513456ba15f168b4b0" title="The button to abort the folder scan.">m_scanFolderAbortButton</a>-&gt;setVisible(<span class="keyword">false</span>);
<a name="l00324"></a>00324 }
<a name="l00325"></a>00325 
<a name="l00326"></a><a class="code" href="class_main_window.html#ab51253aeb070e9e21f334a9287ab1457">00326</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ab51253aeb070e9e21f334a9287ab1457" title="Aborts the running folder scan.">MainWindow::scanFolderAbortButton_clicked</a>()
<a name="l00327"></a>00327 {
<a name="l00328"></a>00328     <span class="keywordflow">if</span> (!<a class="code" href="class_main_window.html#abe0bef6ec39d09861919d26f404b9765" title="The thread to scan the folders in the background.">m_scanFolderThread</a>-&gt;isRunning())
<a name="l00329"></a>00329         <span class="keywordflow">return</span>;
<a name="l00330"></a>00330 
<a name="l00331"></a>00331     <a class="code" href="class_main_window.html#a9e14ad0b9ab84e513456ba15f168b4b0" title="The button to abort the folder scan.">m_scanFolderAbortButton</a>-&gt;setText(tr(<span class="stringliteral">&quot;aborting...&quot;</span>));
<a name="l00332"></a>00332     <a class="code" href="class_main_window.html#a9e14ad0b9ab84e513456ba15f168b4b0" title="The button to abort the folder scan.">m_scanFolderAbortButton</a>-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00333"></a>00333     <a class="code" href="class_main_window.html#abe0bef6ec39d09861919d26f404b9765" title="The thread to scan the folders in the background.">m_scanFolderThread</a>-&gt;<a class="code" href="class_scan_folder_thread.html#a0d90205054bb771ce95164ee8caab5bf" title="Aborts the folder scanning after the current folder has been scanned.">abort</a>();
<a name="l00334"></a>00334 }
<a name="l00335"></a>00335 
<a name="l00336"></a><a class="code" href="class_main_window.html#ada71aec192660bbd9b00a602fa189b87">00336</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ada71aec192660bbd9b00a602fa189b87" title="Helper method to prepare the asynchronous image loading and set up a preview image from the thumbnail...">MainWindow::prepareImage</a>(<span class="keyword">const</span> <a class="code" href="class_image_list_model.html" title="The ImageListModel class provides a model of multiple images which can be presented to the user with ...">ImageListModel</a> *model, <span class="keyword">const</span> QModelIndex &amp;index)
<a name="l00337"></a>00337 {
<a name="l00338"></a>00338     Q_ASSERT(model);
<a name="l00339"></a>00339 
<a name="l00340"></a>00340     QString imagePath = model-&gt;<a class="code" href="class_image_list_model.html#acca5cf33f8aad449a26380375e26ec38" title="Returns the image path for the item referred to by the index.">imagePath</a>(index);
<a name="l00341"></a>00341     <span class="keywordflow">if</span> (imagePath == <a class="code" href="class_main_window.html#a557a89d5561064b42dc890ab3bb2aeb0" title="The path of the current image.">m_currentImagePath</a>)
<a name="l00342"></a>00342         <span class="keywordflow">return</span>;
<a name="l00343"></a>00343 
<a name="l00344"></a>00344     QVariant var = model-&gt;<a class="code" href="class_image_list_model.html#a08b52a5c95f301daf9fb9c7f66f38f2b" title="Returns the data stored under the given role for the item referred to by the index.">data</a>(index, Qt::DecorationRole);
<a name="l00345"></a>00345     <span class="keywordflow">if</span> (var.canConvert&lt;QIcon&gt;()) {
<a name="l00346"></a>00346         <span class="comment">// set up preview image</span>
<a name="l00347"></a>00347         QIcon icon = var.value&lt;QIcon&gt;();
<a name="l00348"></a>00348         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setImage(icon.pixmap(<a class="code" href="class_main_window.html#af87f66c858d48a85afbe6a2c5919ed66" title="The maximum size of the thumbnail icon.">MainWindow::MAX_THUMBNAIL_SIZE</a>).toImage());
<a name="l00349"></a>00349     }
<a name="l00350"></a>00350 
<a name="l00351"></a>00351     <span class="comment">// load the actual image inside a separate thread</span>
<a name="l00352"></a>00352     <a class="code" href="class_image_loader.html" title="The ImageLoader class provides a simple image loader for use with the ImageLoaderPool or QThreadPool ...">ImageLoader</a> *imageLoader = <span class="keyword">new</span> <a class="code" href="class_image_loader.html" title="The ImageLoader class provides a simple image loader for use with the ImageLoaderPool or QThreadPool ...">ImageLoader</a>(imagePath);
<a name="l00353"></a>00353     connect(imageLoader, SIGNAL(<a class="code" href="class_main_window.html#adb8839228205c4c1c0e79d31d1409b96" title="Redirects the loaded image to the image widget.">imageLoaded</a>(QImage, <span class="keywordtype">int</span>, <span class="keywordtype">int</span>, <span class="keywordtype">int</span>)), SLOT(<a class="code" href="class_main_window.html#adb8839228205c4c1c0e79d31d1409b96" title="Redirects the loaded image to the image widget.">imageLoaded</a>(QImage, <span class="keywordtype">int</span>, <span class="keywordtype">int</span>, <span class="keywordtype">int</span>)));
<a name="l00354"></a>00354     QThreadPool::globalInstance()-&gt;start(imageLoader, 1);
<a name="l00355"></a>00355 
<a name="l00356"></a>00356     <span class="comment">// enable image view actions if the first image gets set</span>
<a name="l00357"></a>00357     <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a557a89d5561064b42dc890ab3bb2aeb0" title="The path of the current image.">m_currentImagePath</a>.isEmpty()) {
<a name="l00358"></a>00358         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00359"></a>00359         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRotateClockwise-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00360"></a>00360         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRotateCounterclockwise-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00361"></a>00361         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomFit-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00362"></a>00362         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomOriginal-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00363"></a>00363         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomIn-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00364"></a>00364         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomOut-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00365"></a>00365     }
<a name="l00366"></a>00366 
<a name="l00367"></a>00367     <a class="code" href="class_main_window.html#a557a89d5561064b42dc890ab3bb2aeb0" title="The path of the current image.">m_currentImagePath</a> = imagePath;
<a name="l00368"></a>00368 }
<a name="l00369"></a>00369 
<a name="l00370"></a><a class="code" href="class_main_window.html#a02a929047009e3b2647b8a2b95244d08">00370</a> QWidget* <a class="code" href="class_main_window.html#a02a929047009e3b2647b8a2b95244d08" title="Helper method to determine the active widget for the given action.">MainWindow::activeWidget</a>(QAction *action)
<a name="l00371"></a>00371 {
<a name="l00372"></a>00372     Q_ASSERT(action);
<a name="l00373"></a>00373     <span class="keywordflow">foreach</span> (QWidget* widget, action-&gt;associatedWidgets())
<a name="l00374"></a>00374         <span class="keywordflow">if</span> (widget-&gt;hasFocus())
<a name="l00375"></a>00375             <span class="keywordflow">return</span> widget;
<a name="l00376"></a>00376     <span class="keywordflow">return</span> NULL;
<a name="l00377"></a>00377 }
<a name="l00378"></a>00378 
<a name="l00379"></a><a class="code" href="class_main_window.html#a11de9843ec74f5cd3c292526150c8fb0">00379</a> QMenu* <a class="code" href="class_main_window.html#a11de9843ec74f5cd3c292526150c8fb0" title="Helper method to create a menu for selecting the thumbnail size.">MainWindow::createThumbnailSizeMenu</a>(QWidget *parent, <span class="keywordtype">int</span> selectedSize)
<a name="l00380"></a>00380 {
<a name="l00381"></a>00381     QMenu *menu = <span class="keyword">new</span> QMenu(tr(<span class="stringliteral">&quot;Thumbnail Size&quot;</span>), parent);
<a name="l00382"></a>00382     QActionGroup *actionGroup = <span class="keyword">new</span> QActionGroup(menu);
<a name="l00383"></a>00383     QAction *disabledAction = menu-&gt;addAction(tr(<span class="stringliteral">&quot;Disabled&quot;</span>));
<a name="l00384"></a>00384     disabledAction-&gt;setCheckable(<span class="keyword">true</span>);
<a name="l00385"></a>00385     disabledAction-&gt;setData(0);
<a name="l00386"></a>00386     actionGroup-&gt;addAction(disabledAction);
<a name="l00387"></a>00387     <span class="keywordflow">if</span> (selectedSize == 0)
<a name="l00388"></a>00388         disabledAction-&gt;setChecked(<span class="keyword">true</span>);
<a name="l00389"></a>00389     <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> sizes[] = {16, 24, 32, 48, 64, 96, 128};
<a name="l00390"></a>00390     <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; int(<span class="keyword">sizeof</span>(sizes) / <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)); ++i) {
<a name="l00391"></a>00391         <span class="keywordtype">int</span> size = sizes[i];
<a name="l00392"></a>00392         QAction *sizeAction = menu-&gt;addAction(tr(<span class="stringliteral">&quot;%1 Pixels&quot;</span>).arg(size));
<a name="l00393"></a>00393         sizeAction-&gt;setCheckable(<span class="keyword">true</span>);
<a name="l00394"></a>00394         sizeAction-&gt;setData(size);
<a name="l00395"></a>00395         actionGroup-&gt;addAction(sizeAction);
<a name="l00396"></a>00396         <span class="keywordflow">if</span> (size == selectedSize)
<a name="l00397"></a>00397             sizeAction-&gt;setChecked(<span class="keyword">true</span>);
<a name="l00398"></a>00398     }
<a name="l00399"></a>00399     connect(menu, SIGNAL(triggered(QAction*)), SLOT(<a class="code" href="class_main_window.html#ac77542609ed3a7f6ec155f032e74f94b" title="Sets the thumbnail size.">thumbnailSizeMenu_triggered</a>(QAction*)));
<a name="l00400"></a>00400     <span class="keywordflow">return</span> menu;
<a name="l00401"></a>00401 }
<a name="l00402"></a>00402 
<a name="l00403"></a><a class="code" href="class_main_window.html#ac77542609ed3a7f6ec155f032e74f94b">00403</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ac77542609ed3a7f6ec155f032e74f94b" title="Sets the thumbnail size.">MainWindow::thumbnailSizeMenu_triggered</a>(QAction *action)
<a name="l00404"></a>00404 {
<a name="l00405"></a>00405     <span class="keywordtype">int</span> size = action-&gt;data().toInt();
<a name="l00406"></a>00406     <span class="keywordflow">if</span> (sender()-&gt;parent()-&gt;parent() == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView)
<a name="l00407"></a>00407         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;setIconSize(QSize(size, size));
<a name="l00408"></a>00408     <span class="keywordflow">else</span>
<a name="l00409"></a>00409         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;setIconSize(QSize(size, size));
<a name="l00410"></a>00410 }
<a name="l00411"></a>00411 
<a name="l00412"></a><a class="code" href="class_main_window.html#a8a6ae4bc0d1714028ce85b5ce7c15b0f">00412</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a8a6ae4bc0d1714028ce85b5ce7c15b0f" title="Prepares the clicked image to be displayed.">MainWindow::on_imageListView_clicked</a>(<span class="keyword">const</span> QModelIndex &amp;index)
<a name="l00413"></a>00413 {
<a name="l00414"></a>00414     <span class="keywordflow">if</span> (!index.isValid())
<a name="l00415"></a>00415         <span class="keywordflow">return</span>;
<a name="l00416"></a>00416 
<a name="l00417"></a>00417     <a class="code" href="class_main_window.html#ada71aec192660bbd9b00a602fa189b87" title="Helper method to prepare the asynchronous image loading and set up a preview image from the thumbnail...">prepareImage</a>(<a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>, index);
<a name="l00418"></a>00418     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setText();
<a name="l00419"></a>00419     <a class="code" href="class_main_window.html#a6180c2a419c941ef42c47c19712c0828" title="The associated slidehsow of the current image.">m_currentSlideshow</a> = NULL;
<a name="l00420"></a>00420     <a class="code" href="class_main_window.html#a76e434d6182490fc9ce98f5a1895d7cc" title="The associated slidehsow image of the current image.">m_currentSlideshowImage</a> = NULL;
<a name="l00421"></a>00421 }
<a name="l00422"></a>00422 
<a name="l00423"></a><a class="code" href="class_main_window.html#a5a47234d87da7b40580dd281fca3f018">00423</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a5a47234d87da7b40580dd281fca3f018" title="Adds the double clicked image to the current slideshow.">MainWindow::on_imageListView_doubleClicked</a>(<span class="keyword">const</span> QModelIndex &amp;index)
<a name="l00424"></a>00424 {
<a name="l00425"></a>00425     <span class="keywordflow">if</span> (!index.isValid() || !<a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>())
<a name="l00426"></a>00426         <span class="keywordflow">return</span>;
<a name="l00427"></a>00427 
<a name="l00428"></a>00428     <span class="keywordtype">int</span> i = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#ad342caa4c949ffcb716835c48ae12222" title="Convenience method to add an image to the active slideshow.">addImage</a>(<a class="code" href="class_slideshow_image.html" title="The SlideshowImage class defines a single image from a Slideshow.">SlideshowImage</a>(<a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#acca5cf33f8aad449a26380375e26ec38" title="Returns the image path for the item referred to by the index.">imagePath</a>(index)));
<a name="l00429"></a>00429     <a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a22027ad05ba2ff041771c09ef2b18ab9" title="Adds an image to this model.">addImage</a>(<a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#ac413be89a95df4a245f402a00754484a" title="Returns the image information for the item referred to by the index.">imageInfo</a>(index), i);
<a name="l00430"></a>00430 }
<a name="l00431"></a>00431 
<a name="l00432"></a><a class="code" href="class_main_window.html#a305329c405a9720ac0cce0508dd9aaff">00432</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a305329c405a9720ac0cce0508dd9aaff" title="Shows the context menu of the image list view to the user.">MainWindow::on_imageListView_customContextMenuRequested</a>(<span class="keyword">const</span> QPoint &amp;pos)
<a name="l00433"></a>00433 {
<a name="l00434"></a>00434     QMenu menu(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView);
<a name="l00435"></a>00435     <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;currentIndex().isValid()) {
<a name="l00436"></a>00436         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionAddToSlideshow-&gt;setEnabled(<a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>());
<a name="l00437"></a>00437         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionAddToSlideshow);
<a name="l00438"></a>00438         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRenameImage);
<a name="l00439"></a>00439         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCutImage);
<a name="l00440"></a>00440         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImage);
<a name="l00441"></a>00441         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage);
<a name="l00442"></a>00442         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImageFromDisk);
<a name="l00443"></a>00443         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyPath);
<a name="l00444"></a>00444         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOpenFileLocation);
<a name="l00445"></a>00445         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportImages);
<a name="l00446"></a>00446         menu.addSeparator();
<a name="l00447"></a>00447     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage-&gt;isEnabled() &amp;&amp; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;folderBrowserTreeView-&gt;currentIndex().isValid()) {
<a name="l00448"></a>00448         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage);
<a name="l00449"></a>00449         menu.addSeparator();
<a name="l00450"></a>00450     }
<a name="l00451"></a>00451     QMenu *thumbnailSizeMenu = <a class="code" href="class_main_window.html#a11de9843ec74f5cd3c292526150c8fb0" title="Helper method to create a menu for selecting the thumbnail size.">createThumbnailSizeMenu</a>(&amp;menu, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;iconSize().width());
<a name="l00452"></a>00452     menu.addMenu(thumbnailSizeMenu);
<a name="l00453"></a>00453     <span class="keywordflow">if</span> (!<a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a64e981f7a7e7ee48c36aae17a8ccbfce" title="Returns true if all thumbnails are loaded; otherwise returns false.">allThumbnailsLoaded</a>())
<a name="l00454"></a>00454         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPreloadAllImages);
<a name="l00455"></a>00455     menu.exec(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;mapToGlobal(pos));
<a name="l00456"></a>00456 }
<a name="l00457"></a>00457 
<a name="l00458"></a><a class="code" href="class_main_window.html#a4fea70b2d5a1ec4b9c7a29585f16fe0c">00458</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a4fea70b2d5a1ec4b9c7a29585f16fe0c" title="Shows the found and already loaded image count to the user.">MainWindow::imageListModel_changed</a>()
<a name="l00459"></a>00459 {
<a name="l00460"></a>00460     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListDockWidget-&gt;setWindowTitle(tr(<span class="stringliteral">&quot;Image List %1/%2&quot;</span>)
<a name="l00461"></a>00461                                             .arg(<a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a2c1d0ba595d1b3409898b42de4433ab2" title="Returns the row count.">rowCount</a>())
<a name="l00462"></a>00462                                             .arg(<a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a58a6c21071ba24672f335b3fca40d02c" title="Returns the image count.">imageCount</a>()));
<a name="l00463"></a>00463 }
<a name="l00464"></a>00464 
<a name="l00465"></a><a class="code" href="class_main_window.html#ae1d73e923c6f5bed2c0ca6a5b79a085b">00465</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ae1d73e923c6f5bed2c0ca6a5b79a085b" title="Changes the currently active slideshow and prepares the image list.">MainWindow::on_slideshowListView_selectionChanged</a>(<span class="keyword">const</span> QModelIndex &amp;index)
<a name="l00466"></a>00466 {
<a name="l00467"></a>00467     <span class="keywordflow">if</span> (!index.isValid() || !<a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#abd767fadc7fcec4b9792379305ae0f7d" title="Sets a slideshow referred to by the index to the active one.">setCurrentSlideshow</a>(index))
<a name="l00468"></a>00468         <span class="keywordflow">return</span>;
<a name="l00469"></a>00469 
<a name="l00470"></a>00470     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l00471"></a>00471 
<a name="l00472"></a>00472     <span class="comment">// prepare slideshow image list</span>
<a name="l00473"></a>00473     <a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#ab48d21b2d4b8226ba5d6a09a35e37a1a" title="Removes all images from this model.">clear</a>();
<a name="l00474"></a>00474     QFileInfoList imageInfoList;
<a name="l00475"></a>00475     <span class="keywordflow">foreach</span> (<span class="keyword">const</span> <a class="code" href="class_slideshow_image.html" title="The SlideshowImage class defines a single image from a Slideshow.">SlideshowImage</a> &amp;image, slideshow-&gt;<a class="code" href="class_slideshow.html#a1f724445ba73eb4b24718a440b958c9d" title="Returns a reference to the internal image list.">images</a>())
<a name="l00476"></a>00476         imageInfoList.append(image.<a class="code" href="class_slideshow_image.html#a0314b126a33d5dfe55376080c359ef23" title="Returns the file information of this image.">fileInfo</a>());
<a name="l00477"></a>00477     <a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a944a85402c0d6acac1c9ec28939e8da6" title="Appends multiple images to this model.">addImages</a>(imageInfoList);
<a name="l00478"></a>00478 
<a name="l00479"></a>00479     <span class="comment">// update sort combo box</span>
<a name="l00480"></a>00480     <span class="keywordtype">int</span> sortIndex = 4; <span class="comment">// Unsorted</span>
<a name="l00481"></a>00481     <span class="keywordflow">switch</span> (slideshow-&gt;<a class="code" href="class_slideshow.html#a4025c20e2ad996ea33841a9307fed7bd" title="Returns the sort order of the images inside this slideshow.">sortOrder</a>()) {
<a name="l00482"></a>00482     <span class="keywordflow">case</span> <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a9607749d725b5589f98648a8827bc0b7" title="Sort by name.">Qsm::Name</a>: sortIndex = 0; <span class="keywordflow">break</span>;
<a name="l00483"></a>00483     <span class="keywordflow">case</span> <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a4f69f4c0a4aeb7ce497a256a2a7da46f" title="Sort by name reversed.">Qsm::NameReversed</a>: sortIndex = 1; <span class="keywordflow">break</span>;
<a name="l00484"></a>00484     <span class="keywordflow">case</span> <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a23998ec6f15a3f4577e584de18cd9477" title="Sort by date.">Qsm::Date</a>: sortIndex = 2; <span class="keywordflow">break</span>;
<a name="l00485"></a>00485     <span class="keywordflow">case</span> <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78adc4815d2533a1e9fcf0a48b463a18890" title="Sort by date reversed.">Qsm::DateReversed</a>: sortIndex = 3; <span class="keywordflow">break</span>;
<a name="l00486"></a>00486     }
<a name="l00487"></a>00487     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowSortComboBox-&gt;setCurrentIndex(sortIndex);
<a name="l00488"></a>00488 }
<a name="l00489"></a>00489 
<a name="l00490"></a><a class="code" href="class_main_window.html#aae522b360cea55b4ff8ed115b45d7b84">00490</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#aae522b360cea55b4ff8ed115b45d7b84" title="Shows the context menu of the slideshow list view to the user.">MainWindow::on_slideshowListView_customContextMenuRequested</a>(<span class="keyword">const</span> QPoint &amp;pos)
<a name="l00491"></a>00491 {
<a name="l00492"></a>00492     QMenu menu(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView);
<a name="l00493"></a>00493     <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;currentIndex().isValid()) {
<a name="l00494"></a>00494         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionStartSlideshow);
<a name="l00495"></a>00495         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSlideshowEditComment);
<a name="l00496"></a>00496         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRenameSlideshow);
<a name="l00497"></a>00497         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveSlideshow);
<a name="l00498"></a>00498         <span class="keywordtype">bool</span> imagesAvailable = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>()-&gt;<a class="code" href="class_slideshow.html#a3ff240e093a11cae71e1244a3fd7b457" title="Returns the number of images in this slideshow.">imageCount</a>() &gt; 0;
<a name="l00499"></a>00499         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImagesToSlideshow-&gt;setEnabled(imagesAvailable);
<a name="l00500"></a>00500         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImagesToSlideshow);
<a name="l00501"></a>00501         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOpenFileLocation);
<a name="l00502"></a>00502         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportAllImages-&gt;setEnabled(imagesAvailable);
<a name="l00503"></a>00503         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportAllImages);
<a name="l00504"></a>00504         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionReloadSlideshow);
<a name="l00505"></a>00505         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSaveSlideshow-&gt;setEnabled(<a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>()-&gt;<a class="code" href="class_slideshow.html#a2d43d7b23fb83d018b695700eda7ceec" title="Returns the change state of this slideshow, which indicates that the internal data structure has chan...">hasChanged</a>());
<a name="l00506"></a>00506         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSaveSlideshow);
<a name="l00507"></a>00507     }
<a name="l00508"></a>00508     menu.addSeparator();
<a name="l00509"></a>00509     menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionNewSlideshow);
<a name="l00510"></a>00510     menu.addSeparator();
<a name="l00511"></a>00511     menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionReloadAllSlideshows);
<a name="l00512"></a>00512     menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSaveAllSlideshows);
<a name="l00513"></a>00513     menu.exec(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;mapToGlobal(pos));
<a name="l00514"></a>00514 }
<a name="l00515"></a>00515 
<a name="l00516"></a><a class="code" href="class_main_window.html#a08476875c2f25c23714ee399fd41e2dd">00516</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a08476875c2f25c23714ee399fd41e2dd" title="Renames the actual slideshow file on the disk.">MainWindow::slideshowListModel_slideshowRenamed</a>(<span class="keyword">const</span> QString &amp;oldName, <span class="keyword">const</span> QString &amp;newName)
<a name="l00517"></a>00517 {
<a name="l00518"></a>00518     QDir slideshowsDirectory(<a class="code" href="class_main_window.html#ae0e239a4ad3e3c08e0ef7907f31f1e16" title="The directory where the slideshows are stored.">m_slideshowsDirectory</a>);
<a name="l00519"></a>00519     QString oldPath = slideshowsDirectory.filePath(oldName) + <a class="code" href="class_slideshow.html#a438bed2d1a4744d13bdc51f40422cbb4" title="The file extension of all slideshow files.">Slideshow::FILE_EXTENSION</a>;
<a name="l00520"></a>00520     QString newPath = slideshowsDirectory.filePath(newName) + <a class="code" href="class_slideshow.html#a438bed2d1a4744d13bdc51f40422cbb4" title="The file extension of all slideshow files.">Slideshow::FILE_EXTENSION</a>;
<a name="l00521"></a>00521     <span class="keywordflow">if</span> (!QFile::rename(oldPath, newPath))
<a name="l00522"></a>00522         qWarning(<span class="stringliteral">&quot;File \&quot;%s\&quot; could not be renamed to \&quot;%s\&quot;&quot;</span>, qPrintable(oldPath), qPrintable(newPath));
<a name="l00523"></a>00523 }
<a name="l00524"></a>00524 
<a name="l00525"></a><a class="code" href="class_main_window.html#a092ea902d729abc3dc1a26b6f846d30f">00525</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a092ea902d729abc3dc1a26b6f846d30f">MainWindow::on_slideshowImageListView_clicked</a>(<span class="keyword">const</span> QModelIndex &amp;index)
<a name="l00526"></a>00526 {
<a name="l00527"></a>00527     <span class="keywordflow">if</span> (!index.isValid())
<a name="l00528"></a>00528         <span class="keywordflow">return</span>;
<a name="l00529"></a>00529 
<a name="l00530"></a>00530     <a class="code" href="class_main_window.html#a6180c2a419c941ef42c47c19712c0828" title="The associated slidehsow of the current image.">m_currentSlideshow</a> = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l00531"></a>00531     Q_ASSERT(<a class="code" href="class_main_window.html#a6180c2a419c941ef42c47c19712c0828" title="The associated slidehsow of the current image.">m_currentSlideshow</a>);
<a name="l00532"></a>00532     <a class="code" href="class_main_window.html#a76e434d6182490fc9ce98f5a1895d7cc" title="The associated slidehsow image of the current image.">m_currentSlideshowImage</a> = <a class="code" href="class_main_window.html#a6180c2a419c941ef42c47c19712c0828" title="The associated slidehsow of the current image.">m_currentSlideshow</a>-&gt;<a class="code" href="class_slideshow.html#a12d47ae7aa357fcb2b48c2ca49ab14d3" title="Returns the image at position index or NULL if the index is invalid.">image</a>(index.row());
<a name="l00533"></a>00533     Q_ASSERT(<a class="code" href="class_main_window.html#a76e434d6182490fc9ce98f5a1895d7cc" title="The associated slidehsow image of the current image.">m_currentSlideshowImage</a>);
<a name="l00534"></a>00534     <a class="code" href="class_main_window.html#ada71aec192660bbd9b00a602fa189b87" title="Helper method to prepare the asynchronous image loading and set up a preview image from the thumbnail...">prepareImage</a>(<a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>, index);
<a name="l00535"></a>00535     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setText(<a class="code" href="class_main_window.html#a76e434d6182490fc9ce98f5a1895d7cc" title="The associated slidehsow image of the current image.">m_currentSlideshowImage</a>-&gt;<a class="code" href="class_slideshow_image.html#ab034f4dc5797736ba83f7d80f94ebfd6" title="Returns the comment of this image.">comment</a>());
<a name="l00536"></a>00536 }
<a name="l00537"></a>00537 
<a name="l00538"></a><a class="code" href="class_main_window.html#a1f143ff4eef5836b692a1af1c04cee27">00538</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a1f143ff4eef5836b692a1af1c04cee27" title="Shows the context menu of the slideshow image list view to the user.">MainWindow::on_slideshowImageListView_customContextMenuRequested</a>(<span class="keyword">const</span> QPoint &amp;pos)
<a name="l00539"></a>00539 {
<a name="l00540"></a>00540     QMenu menu(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView);
<a name="l00541"></a>00541     QMenu randomFactorMenu(tr(<span class="stringliteral">&quot;Random Factor&quot;</span>), &amp;menu);
<a name="l00542"></a>00542     QActionGroup randomFactorGroup(&amp;menu);
<a name="l00543"></a>00543     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l00544"></a>00544     <a class="code" href="class_slideshow_image.html" title="The SlideshowImage class defines a single image from a Slideshow.">SlideshowImage</a> *image = slideshow ? slideshow-&gt;<a class="code" href="class_slideshow.html#a12d47ae7aa357fcb2b48c2ca49ab14d3" title="Returns the image at position index or NULL if the index is invalid.">image</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;currentIndex().row()) : NULL;
<a name="l00545"></a>00545     <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;currentIndex().isValid()) {
<a name="l00546"></a>00546         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionImageEditComment);
<a name="l00547"></a>00547         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">int</span> randomFactors[] = {0, 1, 2, 3, 4, 5, 10, 25, 50, 100};
<a name="l00548"></a>00548         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; int(<span class="keyword">sizeof</span>(randomFactors) / <span class="keyword">sizeof</span>(<span class="keywordtype">int</span>)); ++i) {
<a name="l00549"></a>00549             <span class="keywordtype">int</span> randomFactor = randomFactors[i];
<a name="l00550"></a>00550             QAction *randomFactorAction = randomFactorMenu.addAction(QString::number(randomFactor));
<a name="l00551"></a>00551             randomFactorAction-&gt;setCheckable(<span class="keyword">true</span>);
<a name="l00552"></a>00552             randomFactorAction-&gt;setData(randomFactor);
<a name="l00553"></a>00553             randomFactorGroup.addAction(randomFactorAction);
<a name="l00554"></a>00554             <span class="keywordflow">if</span> (image &amp;&amp; image-&gt;<a class="code" href="class_slideshow_image.html#ad76e32144583d88dee2bd00589c662ee" title="Returns the random factor of this image.">randomFactor</a>() == randomFactor)
<a name="l00555"></a>00555                 randomFactorAction-&gt;setChecked(<span class="keyword">true</span>);
<a name="l00556"></a>00556         }
<a name="l00557"></a>00557         <span class="comment">//randomFactorMenu.addAction(...); // TODO: custom random factor</span>
<a name="l00558"></a>00558         menu.addMenu(&amp;randomFactorMenu);
<a name="l00559"></a>00559         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRenameImage);
<a name="l00560"></a>00560         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCutImage);
<a name="l00561"></a>00561         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImage);
<a name="l00562"></a>00562         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage);
<a name="l00563"></a>00563         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImage);
<a name="l00564"></a>00564         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImageFromDisk);
<a name="l00565"></a>00565         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyPath);
<a name="l00566"></a>00566         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOpenFileLocation);
<a name="l00567"></a>00567         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportImages);
<a name="l00568"></a>00568         menu.addSeparator();
<a name="l00569"></a>00569     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage-&gt;isEnabled() &amp;&amp; <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>()) {
<a name="l00570"></a>00570         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage);
<a name="l00571"></a>00571         menu.addSeparator();
<a name="l00572"></a>00572     }
<a name="l00573"></a>00573     QMenu *thumbnailSizeMenu = <a class="code" href="class_main_window.html#a11de9843ec74f5cd3c292526150c8fb0" title="Helper method to create a menu for selecting the thumbnail size.">createThumbnailSizeMenu</a>(&amp;menu, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;iconSize().width());
<a name="l00574"></a>00574     menu.addMenu(thumbnailSizeMenu);
<a name="l00575"></a>00575     <span class="keywordflow">if</span> (slideshow &amp;&amp; slideshow-&gt;<a class="code" href="class_slideshow.html#ac2f6eeeca71be1b7baa60757e2c35f87" title="Returns true if there are corrupted images in this slideshow; otherwise returns false.">hasCorruptedImages</a>())
<a name="l00576"></a>00576         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveAllCorruptedImages);
<a name="l00577"></a>00577     <span class="keywordflow">if</span> (!<a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a64e981f7a7e7ee48c36aae17a8ccbfce" title="Returns true if all thumbnails are loaded; otherwise returns false.">allThumbnailsLoaded</a>())
<a name="l00578"></a>00578         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPreloadAllImages);
<a name="l00579"></a>00579     QAction *action = menu.exec(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;mapToGlobal(pos));
<a name="l00580"></a>00580     <span class="keywordflow">if</span> (action &amp;&amp; action-&gt;parent() == &amp;randomFactorMenu &amp;&amp; image) {
<a name="l00581"></a>00581         <span class="keywordtype">int</span> randomFactor = action-&gt;data().toInt();
<a name="l00582"></a>00582         <span class="keywordflow">foreach</span> (<span class="keyword">const</span> QModelIndex &amp;index, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;selectedIndexes())
<a name="l00583"></a>00583             slideshow-&gt;<a class="code" href="class_slideshow.html#a12d47ae7aa357fcb2b48c2ca49ab14d3" title="Returns the image at position index or NULL if the index is invalid.">image</a>(index.row())-&gt;setRandomFactor(randomFactor);
<a name="l00584"></a>00584         slideshow-&gt;<a class="code" href="class_slideshow.html#a0d7bc9695217820af250ef5913f2a953" title="Sets the state of this slideshow to changed.">setChanged</a>();
<a name="l00585"></a>00585     }
<a name="l00586"></a>00586 }
<a name="l00587"></a>00587 
<a name="l00588"></a><a class="code" href="class_main_window.html#a74fb3bff1988b8ec32efa6d4e53c61f7">00588</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a74fb3bff1988b8ec32efa6d4e53c61f7" title="Shows the found and already loaded image count to the user.">MainWindow::slideshowImageListModel_changed</a>()
<a name="l00589"></a>00589 {
<a name="l00590"></a>00590     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListDockWidget-&gt;setWindowTitle(tr(<span class="stringliteral">&quot;Slideshow Image List %1/%2&quot;</span>)
<a name="l00591"></a>00591                                                      .arg(<a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a2c1d0ba595d1b3409898b42de4433ab2" title="Returns the row count.">rowCount</a>())
<a name="l00592"></a>00592                                                      .arg(<a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a58a6c21071ba24672f335b3fca40d02c" title="Returns the image count.">imageCount</a>()));
<a name="l00593"></a>00593 }
<a name="l00594"></a>00594 
<a name="l00595"></a><a class="code" href="class_main_window.html#a6e72a02b7472523ee44b47fb9eb5e088">00595</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a6e72a02b7472523ee44b47fb9eb5e088" title="Updates the reference of the renamed image path inside the current slideshow.">MainWindow::slideshowImageListModel_imageRenamed</a>(<span class="keyword">const</span> QModelIndex &amp;index, <span class="keyword">const</span> QString &amp;newPath)
<a name="l00596"></a>00596 {
<a name="l00597"></a>00597     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l00598"></a>00598     <span class="keywordflow">if</span> (!slideshow) <span class="keywordflow">return</span>;
<a name="l00599"></a>00599     <a class="code" href="class_slideshow_image.html" title="The SlideshowImage class defines a single image from a Slideshow.">SlideshowImage</a> *image = slideshow-&gt;<a class="code" href="class_slideshow.html#a12d47ae7aa357fcb2b48c2ca49ab14d3" title="Returns the image at position index or NULL if the index is invalid.">image</a>(index.row());
<a name="l00600"></a>00600     <span class="keywordflow">if</span> (!image) <span class="keywordflow">return</span>;
<a name="l00601"></a>00601     image-&gt;<a class="code" href="class_slideshow_image.html#a3aca0b111aa1a1cc1dd7e5a533c0ba0a" title="Sets the file path of this image.">setPath</a>(newPath);
<a name="l00602"></a>00602     slideshow-&gt;<a class="code" href="class_slideshow.html#a0d7bc9695217820af250ef5913f2a953" title="Sets the state of this slideshow to changed.">setChanged</a>();
<a name="l00603"></a>00603 }
<a name="l00604"></a>00604 
<a name="l00605"></a><a class="code" href="class_main_window.html#adb8839228205c4c1c0e79d31d1409b96">00605</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#adb8839228205c4c1c0e79d31d1409b96" title="Redirects the loaded image to the image widget.">MainWindow::imageLoaded</a>(<span class="keyword">const</span> QImage &amp;image, <span class="keywordtype">int</span>, <span class="keywordtype">int</span>, <span class="keywordtype">int</span>)
<a name="l00606"></a>00606 {
<a name="l00607"></a>00607     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setImage(image);
<a name="l00608"></a>00608 }
<a name="l00609"></a>00609 
<a name="l00610"></a><a class="code" href="class_main_window.html#ad3829b383b6e0730ecc50442f43b177e">00610</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ad3829b383b6e0730ecc50442f43b177e" title="Disables all save and load actions until all slideshows are loaded.">MainWindow::slideshowFileManager_started</a>()
<a name="l00611"></a>00611 {
<a name="l00612"></a>00612     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionReloadAllSlideshows-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00613"></a>00613     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSaveAllSlideshows-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00614"></a>00614     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionReloadSlideshow-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00615"></a>00615     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSaveSlideshow-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00616"></a>00616 }
<a name="l00617"></a>00617 
<a name="l00618"></a><a class="code" href="class_main_window.html#a4698e044f81eada0c34765c846d0c7b0">00618</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a4698e044f81eada0c34765c846d0c7b0" title="Enables all save and load actions.">MainWindow::slideshowFileManager_finished</a>()
<a name="l00619"></a>00619 {
<a name="l00620"></a>00620     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionReloadAllSlideshows-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00621"></a>00621     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSaveAllSlideshows-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00622"></a>00622     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionReloadSlideshow-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00623"></a>00623     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSaveSlideshow-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00624"></a>00624 }
<a name="l00625"></a>00625 
<a name="l00626"></a><a class="code" href="class_main_window.html#a3b8546b3067fb5378481455c9ee2d12d">00626</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a3b8546b3067fb5378481455c9ee2d12d" title="Shows the zoom factor of the current image to the user.">MainWindow::on_imageWidget_viewChanged</a>()
<a name="l00627"></a>00627 {
<a name="l00628"></a>00628     <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomFit-&gt;isEnabled())
<a name="l00629"></a>00629         statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;Zoom: %1%&quot;</span>).arg(<span class="keywordtype">int</span>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;zoomFactor() * 100)));
<a name="l00630"></a>00630 }
<a name="l00631"></a>00631 
<a name="l00632"></a><a class="code" href="class_main_window.html#a43aafbf1d0a876c4cae991020de5c094">00632</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a43aafbf1d0a876c4cae991020de5c094" title="Adds the current image to the current slideshow.">MainWindow::on_imageWidget_doubleClicked</a>()
<a name="l00633"></a>00633 {
<a name="l00634"></a>00634     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l00635"></a>00635     <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a557a89d5561064b42dc890ab3bb2aeb0" title="The path of the current image.">m_currentImagePath</a>.isEmpty() || !slideshow)
<a name="l00636"></a>00636         <span class="keywordflow">return</span>;
<a name="l00637"></a>00637 
<a name="l00638"></a>00638     <span class="keywordtype">int</span> i = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#ad342caa4c949ffcb716835c48ae12222" title="Convenience method to add an image to the active slideshow.">addImage</a>(<a class="code" href="class_main_window.html#a557a89d5561064b42dc890ab3bb2aeb0" title="The path of the current image.">m_currentImagePath</a>);
<a name="l00639"></a>00639     <a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a22027ad05ba2ff041771c09ef2b18ab9" title="Adds an image to this model.">addImage</a>(<a class="code" href="class_image_info.html" title="The ImageInfo class provides information about the image location, dimension and holds a thumbnail re...">ImageInfo</a>(<a class="code" href="class_main_window.html#a557a89d5561064b42dc890ab3bb2aeb0" title="The path of the current image.">m_currentImagePath</a>), i);
<a name="l00640"></a>00640     statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;Image added to slideshow \&quot;%1\&quot;&quot;</span>).arg(slideshow-&gt;<a class="code" href="class_slideshow.html#aa6b6334d0e760b2d664f16d3cb49e4f1" title="Returns the name of this slideshow.">name</a>()));
<a name="l00641"></a>00641 }
<a name="l00642"></a>00642 
<a name="l00643"></a><a class="code" href="class_main_window.html#abfe27c7e97dde386c26cbe50b5f4f8a6">00643</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#abfe27c7e97dde386c26cbe50b5f4f8a6" title="Shows the context menu of the image widget to the user.">MainWindow::on_imageWidget_customContextMenuRequested</a>(<span class="keyword">const</span> QPoint &amp;pos)
<a name="l00644"></a>00644 {
<a name="l00645"></a>00645     QMenu menu(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget);
<a name="l00646"></a>00646     <span class="keywordflow">if</span> (QFile::exists(<a class="code" href="class_main_window.html#a557a89d5561064b42dc890ab3bb2aeb0" title="The path of the current image.">m_currentImagePath</a>)) {
<a name="l00647"></a>00647         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionAddToSlideshow-&gt;setEnabled(<a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>());
<a name="l00648"></a>00648         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionAddToSlideshow);
<a name="l00649"></a>00649         menu.addSeparator();
<a name="l00650"></a>00650         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRotateClockwise);
<a name="l00651"></a>00651         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRotateCounterclockwise);
<a name="l00652"></a>00652         menu.addMenu(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;menuZoom);
<a name="l00653"></a>00653         menu.addSeparator();
<a name="l00654"></a>00654         <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a76e434d6182490fc9ce98f5a1895d7cc" title="The associated slidehsow image of the current image.">m_currentSlideshowImage</a>)
<a name="l00655"></a>00655             menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionImageEditComment);
<a name="l00656"></a>00656         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCutImage);
<a name="l00657"></a>00657         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImage);
<a name="l00658"></a>00658         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImageFromDisk);
<a name="l00659"></a>00659         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyPath);
<a name="l00660"></a>00660         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOpenFileLocation);
<a name="l00661"></a>00661         menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportImages);
<a name="l00662"></a>00662         menu.addSeparator();
<a name="l00663"></a>00663     }
<a name="l00664"></a>00664     menu.addAction(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionShowComments);
<a name="l00665"></a>00665     menu.exec(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;mapToGlobal(pos));
<a name="l00666"></a>00666 }
<a name="l00667"></a>00667 
<a name="l00668"></a><a class="code" href="class_main_window.html#a7e984b09ac68f6844ae01eb8d3c58545">00668</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a7e984b09ac68f6844ae01eb8d3c58545" title="Creates a new Slideshow and sets it as current slideshow.">MainWindow::on_actionNewSlideshow_triggered</a>()
<a name="l00669"></a>00669 {
<a name="l00670"></a>00670     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;setCurrentIndex(<a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#af7235d26497949aab04f2f31e3bc62a5" title="Adds a slideshow to this model.">addSlideshow</a>(<a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a>(tr(<span class="stringliteral">&quot;New Slideshow&quot;</span>))));
<a name="l00671"></a>00671 }
<a name="l00672"></a>00672 
<a name="l00673"></a><a class="code" href="class_main_window.html#ad0dc6312472c0380d0ff820d8cb58170">00673</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ad0dc6312472c0380d0ff820d8cb58170" title="Reloads all Slideshows.">MainWindow::on_actionReloadAllSlideshows_triggered</a>()
<a name="l00674"></a>00674 {
<a name="l00675"></a>00675     <a class="code" href="class_main_window.html#a8dfe8a33a5cf8c3727d3ed6fc3ecef97" title="The slideshow file manager to load and save slideshows.">m_slideshowFileManager</a>-&gt;<a class="code" href="class_slideshow_file_manager.html#ac73da381448583bdde6d0779bbd3f309" title="Loads all slideshows inside a folder from the file system into memory.">loadAllSlideshows</a>(<a class="code" href="class_main_window.html#ae0e239a4ad3e3c08e0ef7907f31f1e16" title="The directory where the slideshows are stored.">m_slideshowsDirectory</a>);
<a name="l00676"></a>00676 }
<a name="l00677"></a>00677 
<a name="l00678"></a><a class="code" href="class_main_window.html#ae1fd2ba4eccf8584d62bc34d4478de4d">00678</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ae1fd2ba4eccf8584d62bc34d4478de4d" title="Saves all Slideshows.">MainWindow::on_actionSaveAllSlideshows_triggered</a>()
<a name="l00679"></a>00679 {
<a name="l00680"></a>00680     <a class="code" href="class_main_window.html#a8dfe8a33a5cf8c3727d3ed6fc3ecef97" title="The slideshow file manager to load and save slideshows.">m_slideshowFileManager</a>-&gt;<a class="code" href="class_slideshow_file_manager.html#a767962bc947f2eea25d233c731406740" title="Saves a list of slideshows from memory to the file system.">saveAllSlideshows</a>(<a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#a080751395b89facf716a5a4ded269a10" title="Returns the internal list of all slideshows stored in this model.">slideshowList</a>(), <a class="code" href="class_main_window.html#ae0e239a4ad3e3c08e0ef7907f31f1e16" title="The directory where the slideshows are stored.">m_slideshowsDirectory</a>);
<a name="l00681"></a>00681 }
<a name="l00682"></a>00682 
<a name="l00683"></a><a class="code" href="class_main_window.html#a37848047e4bc8594a3e83e75bd6383cf">00683</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a37848047e4bc8594a3e83e75bd6383cf" title="Toggles the visibility of the statusbar.">MainWindow::on_actionStatusbar_triggered</a>()
<a name="l00684"></a>00684 {
<a name="l00685"></a>00685     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;statusBar-&gt;setVisible(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionStatusbar-&gt;isChecked());
<a name="l00686"></a>00686 }
<a name="l00687"></a>00687 
<a name="l00688"></a><a class="code" href="class_main_window.html#a1dd57ccb62bc6f5a361aba6e088dd2e1">00688</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a1dd57ccb62bc6f5a361aba6e088dd2e1" title="Opens the options window as a modal dialog.">MainWindow::on_actionOptions_triggered</a>()
<a name="l00689"></a>00689 {
<a name="l00690"></a>00690     QList&lt;QPair&lt;QString, QList&lt;QAction*&gt; &gt; &gt; actions;
<a name="l00691"></a>00691 
<a name="l00692"></a>00692     <span class="comment">// window shortcuts</span>
<a name="l00693"></a>00693     QList&lt;QAction*&gt; windowActions;
<a name="l00694"></a>00694     windowActions &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExit &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOptions &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOpenSlideshowsDirectory
<a name="l00695"></a>00695                   &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOpenImagesDirectory &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionQsmHelp;
<a name="l00696"></a>00696     actions.append(qMakePair(tr(<span class="stringliteral">&quot;Window&quot;</span>), windowActions));
<a name="l00697"></a>00697 
<a name="l00698"></a>00698     <span class="comment">// image shortcuts</span>
<a name="l00699"></a>00699     QList&lt;QAction*&gt; imageActions;
<a name="l00700"></a>00700     imageActions &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionAddToSlideshow &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionImageEditComment &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRenameImage
<a name="l00701"></a>00701                  &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCutImage &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImage &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage
<a name="l00702"></a>00702                  &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImage &lt;&lt;  <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImageFromDisk &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyPath
<a name="l00703"></a>00703                  &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOpenFileLocation &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportImages &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveAllCorruptedImages
<a name="l00704"></a>00704                  &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPreloadAllImages;
<a name="l00705"></a>00705     actions.append(qMakePair(tr(<span class="stringliteral">&quot;Image&quot;</span>), imageActions));
<a name="l00706"></a>00706 
<a name="l00707"></a>00707     <span class="comment">// slideshow shortcuts</span>
<a name="l00708"></a>00708     QList&lt;QAction*&gt; slideshowActions;
<a name="l00709"></a>00709     slideshowActions &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionNewSlideshow &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionReloadAllSlideshows &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSaveAllSlideshows
<a name="l00710"></a>00710                      &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionStartSlideshow &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSlideshowEditComment &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRenameSlideshow
<a name="l00711"></a>00711                      &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveSlideshow &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImagesToSlideshow &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportAllImages
<a name="l00712"></a>00712                      &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionReloadSlideshow &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionSaveSlideshow;
<a name="l00713"></a>00713     actions.append(qMakePair(tr(<span class="stringliteral">&quot;Slideshow&quot;</span>), slideshowActions));
<a name="l00714"></a>00714 
<a name="l00715"></a>00715     <span class="comment">// image view shortcuts</span>
<a name="l00716"></a>00716     QList&lt;QAction*&gt; imageViewActions;
<a name="l00717"></a>00717     imageViewActions &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRotateClockwise &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRotateCounterclockwise &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomFit
<a name="l00718"></a>00718                      &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomOriginal &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomIn &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionZoomOut
<a name="l00719"></a>00719                      &lt;&lt; <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionShowComments;
<a name="l00720"></a>00720     actions.append(qMakePair(tr(<span class="stringliteral">&quot;Image View&quot;</span>), imageViewActions));
<a name="l00721"></a>00721 
<a name="l00722"></a>00722     <span class="comment">// open options dialog</span>
<a name="l00723"></a>00723     <a class="code" href="class_options_dialog.html" title="The OptionsDialog class defines the preferences window for user customization.">OptionsDialog</a> options(&amp;actions, <span class="keyword">this</span>);
<a name="l00724"></a>00724     <span class="keywordflow">if</span> (options.exec() == QDialog::Accepted) {
<a name="l00725"></a>00725         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setBackgroundColor(options.<a class="code" href="class_options_dialog.html#abc88bb6b6171ab88876f33f974f6b870" title="Returns the selected background color for the image widget.">backgroundColor</a>());
<a name="l00726"></a>00726         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setTextBackgroundColor(options.<a class="code" href="class_options_dialog.html#a7bfe224e33141dfaa54538c340f397f4" title="Returns the selected text background color for the image widget.">textBackgroundColor</a>());
<a name="l00727"></a>00727         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setTextFont(options.<a class="code" href="class_options_dialog.html#adabee75ddfc1837ff6d05b68ce8d9c9e" title="Returns the selected text font.">textFont</a>());
<a name="l00728"></a>00728         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setTextColor(options.<a class="code" href="class_options_dialog.html#af63fadee0b3f9895ae9c3941db016a9d" title="Returns the selected text color for the image widget.">textColor</a>());
<a name="l00729"></a>00729         QString slideshowsDirectory = options.<a class="code" href="class_options_dialog.html#a2ae48361ba07897b13df9911f33d157f" title="Returns the selected slideshows directory to store all slideshows.">slideshowsDirectory</a>();
<a name="l00730"></a>00730         <span class="keywordflow">if</span> (slideshowsDirectory != <a class="code" href="class_main_window.html#ae0e239a4ad3e3c08e0ef7907f31f1e16" title="The directory where the slideshows are stored.">m_slideshowsDirectory</a>) {
<a name="l00731"></a>00731             <a class="code" href="class_main_window.html#ae0e239a4ad3e3c08e0ef7907f31f1e16" title="The directory where the slideshows are stored.">m_slideshowsDirectory</a> = slideshowsDirectory;
<a name="l00732"></a>00732             <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#abbb128b8dc53c192c512b70e1165066a" title="Removes all slideshows from this model.">clear</a>();
<a name="l00733"></a>00733             <a class="code" href="class_main_window.html#ad0dc6312472c0380d0ff820d8cb58170" title="Reloads all Slideshows.">on_actionReloadAllSlideshows_triggered</a>();
<a name="l00734"></a>00734         }
<a name="l00735"></a>00735         <a class="code" href="class_main_window.html#a100e6a0d37e7269ebfefb4d8d82eabfc" title="The directory where the exported images are stored.">m_imagesDirectory</a> = options.<a class="code" href="class_options_dialog.html#ac6b0c9c3f0bc03cd9e6fe3d18dcba510" title="Returns the selected images directory to stored all exported images.">imagesDirectory</a>();
<a name="l00736"></a>00736     }
<a name="l00737"></a>00737 }
<a name="l00738"></a>00738 
<a name="l00739"></a><a class="code" href="class_main_window.html#ad6b8a94b625c158c64ff82179b4390ea">00739</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ad6b8a94b625c158c64ff82179b4390ea" title="Opens the slideshows directory with the native file browser.">MainWindow::on_actionOpenSlideshowsDirectory_triggered</a>()
<a name="l00740"></a>00740 {
<a name="l00741"></a>00741     QDesktopServices::openUrl(QUrl(<span class="stringliteral">&quot;file:///&quot;</span> + <a class="code" href="class_main_window.html#ae0e239a4ad3e3c08e0ef7907f31f1e16" title="The directory where the slideshows are stored.">m_slideshowsDirectory</a>, QUrl::TolerantMode));
<a name="l00742"></a>00742 }
<a name="l00743"></a>00743 
<a name="l00744"></a><a class="code" href="class_main_window.html#a779ef39a64808ad88f10dc10ed3206c7">00744</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a779ef39a64808ad88f10dc10ed3206c7" title="Opens the images directory with the native file browser.">MainWindow::on_actionOpenImagesDirectory_triggered</a>()
<a name="l00745"></a>00745 {
<a name="l00746"></a>00746     QDesktopServices::openUrl(QUrl(<span class="stringliteral">&quot;file:///&quot;</span> + <a class="code" href="class_main_window.html#a100e6a0d37e7269ebfefb4d8d82eabfc" title="The directory where the exported images are stored.">m_imagesDirectory</a>, QUrl::TolerantMode));
<a name="l00747"></a>00747 }
<a name="l00748"></a>00748 
<a name="l00749"></a><a class="code" href="class_main_window.html#a38e997f8bde098b303a43aa539f106f4">00749</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a38e997f8bde098b303a43aa539f106f4" title="Opens the user guide.">MainWindow::on_actionQsmHelp_triggered</a>()
<a name="l00750"></a>00750 {
<a name="l00751"></a>00751 }
<a name="l00752"></a>00752 
<a name="l00753"></a><a class="code" href="class_main_window.html#a0cca354d48c12b73fc25bedf0f96bdb1">00753</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a0cca354d48c12b73fc25bedf0f96bdb1" title="Shows the about box.">MainWindow::on_actionAboutQsm_triggered</a>()
<a name="l00754"></a>00754 {
<a name="l00755"></a>00755     QMessageBox::about(<span class="keyword">this</span>, tr(<span class="stringliteral">&quot;About QSM&quot;</span>),
<a name="l00756"></a>00756             tr(<span class="stringliteral">&quot;&lt;b&gt;Qt Slideshow Manager&lt;/b&gt; v1.0 beta&lt;br/&gt;&lt;br/&gt;&quot;</span>
<a name="l00757"></a>00757                <span class="stringliteral">&quot;Copyright &amp;copy; 2011 Fachhochschule S&amp;uuml;dwestfalen&lt;br/&gt;&quot;</span>
<a name="l00758"></a>00758                <span class="stringliteral">&quot;Written by Alexander Vos and Till Althaus&quot;</span>));
<a name="l00759"></a>00759 }
<a name="l00760"></a>00760 
<a name="l00761"></a><a class="code" href="class_main_window.html#a7f426a41d9687185d007fed0f07040ae">00761</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a7f426a41d9687185d007fed0f07040ae" title="Adds the selected images to the current slideshow.">MainWindow::on_actionAddToSlideshow_triggered</a>()
<a name="l00762"></a>00762 {
<a name="l00763"></a>00763     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l00764"></a>00764     <span class="keywordflow">if</span> (!slideshow) <span class="keywordflow">return</span>;
<a name="l00765"></a>00765 
<a name="l00766"></a>00766     QWidget *widget = <a class="code" href="class_main_window.html#a02a929047009e3b2647b8a2b95244d08" title="Helper method to determine the active widget for the given action.">activeWidget</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionAddToSlideshow);
<a name="l00767"></a>00767     <span class="keywordflow">if</span> (!widget) <span class="keywordflow">return</span>;
<a name="l00768"></a>00768 
<a name="l00769"></a>00769     <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView) {
<a name="l00770"></a>00770         QModelIndexList indexList = <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;selectedIndexes();
<a name="l00771"></a>00771         <span class="keywordflow">foreach</span> (<span class="keyword">const</span> QModelIndex &amp;index, indexList) {
<a name="l00772"></a>00772             <span class="keywordtype">int</span> i = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#ad342caa4c949ffcb716835c48ae12222" title="Convenience method to add an image to the active slideshow.">addImage</a>(<a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#acca5cf33f8aad449a26380375e26ec38" title="Returns the image path for the item referred to by the index.">imagePath</a>(index));
<a name="l00773"></a>00773             <a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a22027ad05ba2ff041771c09ef2b18ab9" title="Adds an image to this model.">addImage</a>(<a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#ac413be89a95df4a245f402a00754484a" title="Returns the image information for the item referred to by the index.">imageInfo</a>(index), i);
<a name="l00774"></a>00774         }
<a name="l00775"></a>00775         statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;%1 image(s) added to slideshow \&quot;%2\&quot;&quot;</span>).arg(indexList.count()).arg(slideshow-&gt;<a class="code" href="class_slideshow.html#aa6b6334d0e760b2d664f16d3cb49e4f1" title="Returns the name of this slideshow.">name</a>()));
<a name="l00776"></a>00776     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget)
<a name="l00777"></a>00777         <a class="code" href="class_main_window.html#a43aafbf1d0a876c4cae991020de5c094" title="Adds the current image to the current slideshow.">on_imageWidget_doubleClicked</a>();
<a name="l00778"></a>00778 }
<a name="l00779"></a>00779 
<a name="l00780"></a><a class="code" href="class_main_window.html#a9123cbbeefa6fa62e260591c068b41f9">00780</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a9123cbbeefa6fa62e260591c068b41f9" title="Opens a modal dialog to edit the comment of one or multiple image(s).">MainWindow::on_actionImageEditComment_triggered</a>()
<a name="l00781"></a>00781 {
<a name="l00782"></a>00782     QWidget *widget = <a class="code" href="class_main_window.html#a02a929047009e3b2647b8a2b95244d08" title="Helper method to determine the active widget for the given action.">activeWidget</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionImageEditComment);
<a name="l00783"></a>00783     <span class="keywordflow">if</span> (!widget) <span class="keywordflow">return</span>;
<a name="l00784"></a>00784 
<a name="l00785"></a>00785     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = NULL;
<a name="l00786"></a>00786     QList&lt;SlideshowImage*&gt; images;
<a name="l00787"></a>00787     <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView) {
<a name="l00788"></a>00788         slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l00789"></a>00789         <span class="keywordflow">if</span> (!slideshow) <span class="keywordflow">return</span>;
<a name="l00790"></a>00790         <span class="keywordflow">foreach</span> (<span class="keyword">const</span> QModelIndex &amp;index, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;selectedIndexes())
<a name="l00791"></a>00791             images.append(slideshow-&gt;<a class="code" href="class_slideshow.html#a12d47ae7aa357fcb2b48c2ca49ab14d3" title="Returns the image at position index or NULL if the index is invalid.">image</a>(index.row()));
<a name="l00792"></a>00792     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget &amp;&amp; <a class="code" href="class_main_window.html#a76e434d6182490fc9ce98f5a1895d7cc" title="The associated slidehsow image of the current image.">m_currentSlideshowImage</a>) {
<a name="l00793"></a>00793         slideshow = <a class="code" href="class_main_window.html#a6180c2a419c941ef42c47c19712c0828" title="The associated slidehsow of the current image.">m_currentSlideshow</a>;
<a name="l00794"></a>00794         images.append(<a class="code" href="class_main_window.html#a76e434d6182490fc9ce98f5a1895d7cc" title="The associated slidehsow image of the current image.">m_currentSlideshowImage</a>);
<a name="l00795"></a>00795     }
<a name="l00796"></a>00796     <span class="keywordflow">if</span> (!slideshow || !images.count()) <span class="keywordflow">return</span>;
<a name="l00797"></a>00797 
<a name="l00798"></a>00798     <span class="keywordtype">bool</span> ok;
<a name="l00799"></a>00799     QString currentComment = slideshow-&gt;<a class="code" href="class_slideshow.html#a12d47ae7aa357fcb2b48c2ca49ab14d3" title="Returns the image at position index or NULL if the index is invalid.">image</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;currentIndex().row())-&gt;comment();
<a name="l00800"></a>00800     QString comment = QInputDialog::getText(<span class="keyword">this</span>, tr(<span class="stringliteral">&quot;Edit Comment&quot;</span>), tr(<span class="stringliteral">&quot;Comment:&quot;</span>),
<a name="l00801"></a>00801                                             QLineEdit::Normal, currentComment, &amp;ok);
<a name="l00802"></a>00802     <span class="keywordflow">if</span> (ok) {
<a name="l00803"></a>00803         <span class="keywordflow">foreach</span> (<a class="code" href="class_slideshow_image.html" title="The SlideshowImage class defines a single image from a Slideshow.">SlideshowImage</a> *image, images) {
<a name="l00804"></a>00804             image-&gt;<a class="code" href="class_slideshow_image.html#a301f5a0dd7bc89bd54ee0e46759c500d" title="Sets the comment of this image.">setComment</a>(comment);
<a name="l00805"></a>00805             <span class="keywordflow">if</span> (image == <a class="code" href="class_main_window.html#a76e434d6182490fc9ce98f5a1895d7cc" title="The associated slidehsow image of the current image.">m_currentSlideshowImage</a>)
<a name="l00806"></a>00806                 <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;setText(comment);
<a name="l00807"></a>00807         }
<a name="l00808"></a>00808         slideshow-&gt;<a class="code" href="class_slideshow.html#a0d7bc9695217820af250ef5913f2a953" title="Sets the state of this slideshow to changed.">setChanged</a>();
<a name="l00809"></a>00809     }
<a name="l00810"></a>00810 }
<a name="l00811"></a>00811 
<a name="l00812"></a><a class="code" href="class_main_window.html#a88099f6ec3b7df5df01720dc4a9b3f7b">00812</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a88099f6ec3b7df5df01720dc4a9b3f7b" title="Activates the inline edit function if one image is selected, if multiple images are selected a modal ...">MainWindow::on_actionRenameImage_triggered</a>()
<a name="l00813"></a>00813 {
<a name="l00814"></a>00814     QWidget *widget = <a class="code" href="class_main_window.html#a02a929047009e3b2647b8a2b95244d08" title="Helper method to determine the active widget for the given action.">activeWidget</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRenameImage);
<a name="l00815"></a>00815     <span class="keywordflow">if</span> (!widget) <span class="keywordflow">return</span>;
<a name="l00816"></a>00816     <a class="code" href="class_image_list_view.html" title="The ImageListView class provides a list view onto a ImageListModel.">ImageListView</a> *view = qobject_cast&lt;<a class="code" href="class_image_list_view.html" title="The ImageListView class provides a list view onto a ImageListModel.">ImageListView</a>*&gt;(widget);
<a name="l00817"></a>00817     <span class="keywordflow">if</span> (!view) <span class="keywordflow">return</span>;
<a name="l00818"></a>00818     <a class="code" href="class_image_list_model.html" title="The ImageListModel class provides a model of multiple images which can be presented to the user with ...">ImageListModel</a>* model = qobject_cast&lt;<a class="code" href="class_image_list_model.html" title="The ImageListModel class provides a model of multiple images which can be presented to the user with ...">ImageListModel</a>*&gt;(view-&gt;model());
<a name="l00819"></a>00819     <span class="keywordflow">if</span> (!model) <span class="keywordflow">return</span>;
<a name="l00820"></a>00820     QModelIndexList indexList = view-&gt;<a class="code" href="class_image_list_view.html#ae262be916e1c742d2ecc673f4664ccf8" title="Returns a list of all selected and non-hidden item indexes in the view.">selectedIndexes</a>();
<a name="l00821"></a>00821     <span class="keywordflow">if</span> (indexList.isEmpty())
<a name="l00822"></a>00822         <span class="keywordflow">return</span>;
<a name="l00823"></a>00823     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (indexList.count() == 1) <span class="comment">// inline rename</span>
<a name="l00824"></a>00824         view-&gt;edit(view-&gt;currentIndex());
<a name="l00825"></a>00825     <span class="keywordflow">else</span> <span class="comment">// show dialog to rename multiple images</span>
<a name="l00826"></a>00826         ; <span class="comment">// TODO</span>
<a name="l00827"></a>00827 }
<a name="l00828"></a>00828 
<a name="l00829"></a><a class="code" href="class_main_window.html#a7af6001192ada46c62c79a51d6c11e20">00829</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a7af6001192ada46c62c79a51d6c11e20" title="Cuts the selected images to the internal clipboard.">MainWindow::on_actionCutImage_triggered</a>()
<a name="l00830"></a>00830 {
<a name="l00831"></a>00831     <a class="code" href="class_main_window.html#a7dd3b1a2f35d3110ea5832e5af50c4b4" title="The copy mode of the last copy action.">m_copyMode</a> = <a class="code" href="class_main_window.html#a148edda50fa90a213e25f4310c05b3cdadd9a54979c2a41d96055a931985ad7e1" title="The cut mode.">Cut</a>;
<a name="l00832"></a>00832     <a class="code" href="class_main_window.html#a90456f979f1ce9e8f3675b031c9a430f" title="The path list of the copied images.">m_clipboard</a> = <a class="code" href="class_main_window.html#abfa3e34ec476614330e2652e7a451b76" title="Helper method to get all image paths for the given action.">imagePaths</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCutImage);
<a name="l00833"></a>00833     <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a90456f979f1ce9e8f3675b031c9a430f" title="The path list of the copied images.">m_clipboard</a>.isEmpty())
<a name="l00834"></a>00834         <span class="keywordflow">return</span>;
<a name="l00835"></a>00835     statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;%1 image(s) cut out&quot;</span>).arg(<a class="code" href="class_main_window.html#a90456f979f1ce9e8f3675b031c9a430f" title="The path list of the copied images.">m_clipboard</a>.count()));
<a name="l00836"></a>00836     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00837"></a>00837 }
<a name="l00838"></a>00838 
<a name="l00839"></a><a class="code" href="class_main_window.html#a06d6f5f6d9e4db66038a35ac00b02d0e">00839</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a06d6f5f6d9e4db66038a35ac00b02d0e" title="Copies the selected images to the internal clipboard.">MainWindow::on_actionCopyImage_triggered</a>()
<a name="l00840"></a>00840 {
<a name="l00841"></a>00841     <a class="code" href="class_main_window.html#a7dd3b1a2f35d3110ea5832e5af50c4b4" title="The copy mode of the last copy action.">m_copyMode</a> = <a class="code" href="class_main_window.html#a148edda50fa90a213e25f4310c05b3cdae188f519aa5bb0d611e5e47016f97c7e" title="The copy mode.">Copy</a>;
<a name="l00842"></a>00842     <a class="code" href="class_main_window.html#a90456f979f1ce9e8f3675b031c9a430f" title="The path list of the copied images.">m_clipboard</a> = <a class="code" href="class_main_window.html#abfa3e34ec476614330e2652e7a451b76" title="Helper method to get all image paths for the given action.">imagePaths</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyImage);
<a name="l00843"></a>00843     <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a90456f979f1ce9e8f3675b031c9a430f" title="The path list of the copied images.">m_clipboard</a>.isEmpty())
<a name="l00844"></a>00844         <span class="keywordflow">return</span>;
<a name="l00845"></a>00845     statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;%1 image(s) copied&quot;</span>).arg(<a class="code" href="class_main_window.html#a90456f979f1ce9e8f3675b031c9a430f" title="The path list of the copied images.">m_clipboard</a>.count()));
<a name="l00846"></a>00846     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00847"></a>00847 }
<a name="l00848"></a>00848 
<a name="l00849"></a><a class="code" href="class_main_window.html#acbbe922bbedffa0cae1eb67effd25e03">00849</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#acbbe922bbedffa0cae1eb67effd25e03" title="Inserts all images from the internal clipboard.">MainWindow::on_actionPasteImage_triggered</a>()
<a name="l00850"></a>00850 {
<a name="l00851"></a>00851     QWidget *widget = <a class="code" href="class_main_window.html#a02a929047009e3b2647b8a2b95244d08" title="Helper method to determine the active widget for the given action.">activeWidget</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage);
<a name="l00852"></a>00852     <span class="keywordflow">if</span> (!widget || <a class="code" href="class_main_window.html#a90456f979f1ce9e8f3675b031c9a430f" title="The path list of the copied images.">m_clipboard</a>.isEmpty()) <span class="keywordflow">return</span>;
<a name="l00853"></a>00853     <span class="comment">// insert images from &quot;clipboard&quot;</span>
<a name="l00854"></a>00854     <span class="keywordtype">int</span> count = 0;
<a name="l00855"></a>00855     <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView) {
<a name="l00856"></a>00856         QModelIndex folderIndex = <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;folderBrowserTreeView-&gt;currentIndex();
<a name="l00857"></a>00857         <span class="keywordflow">if</span> (!folderIndex.isValid()) <span class="keywordflow">return</span>;
<a name="l00858"></a>00858         QDir dir = <a class="code" href="class_main_window.html#afa2586cbd7f8310c9ef2112cf3a0ac9a" title="The file system model.">m_folderBrowserModel</a>-&gt;filePath(folderIndex);
<a name="l00859"></a>00859         <span class="keywordflow">foreach</span> (<span class="keyword">const</span> QString &amp;src, <a class="code" href="class_main_window.html#a90456f979f1ce9e8f3675b031c9a430f" title="The path list of the copied images.">m_clipboard</a>) {
<a name="l00860"></a>00860             QString dst = dir.filePath(QFileInfo(src).fileName());
<a name="l00861"></a>00861             <span class="keywordflow">if</span> (QFile::copy(src, dst)) {
<a name="l00862"></a>00862                 count++;
<a name="l00863"></a>00863                 <span class="keywordflow">if</span> (!QFile::remove(src))
<a name="l00864"></a>00864                     qWarning(<span class="stringliteral">&quot;File \&quot;%s\&quot; could not be removed&quot;</span>, qPrintable(src));
<a name="l00865"></a>00865             } <span class="keywordflow">else</span>
<a name="l00866"></a>00866                 qWarning(<span class="stringliteral">&quot;File \&quot;%s\&quot; could not be copied to \&quot;%s\&quot;&quot;</span>, qPrintable(src), qPrintable(dst));
<a name="l00867"></a>00867         }
<a name="l00868"></a>00868         <span class="keywordflow">if</span> (count &gt; 0) <span class="comment">// refresh view</span>
<a name="l00869"></a>00869             <a class="code" href="class_main_window.html#abffb5da22e4f345c1ea3828bdea0b4ed" title="Helper method to start the asynchronous folder scan.">scanFolder</a>(folderIndex, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;includeSubfoldersCheckBox-&gt;isChecked());
<a name="l00870"></a>00870     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView) {
<a name="l00871"></a>00871         <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l00872"></a>00872         <span class="keywordflow">if</span> (!slideshow) <span class="keywordflow">return</span>;
<a name="l00873"></a>00873         <span class="keywordflow">foreach</span> (<span class="keyword">const</span> QString &amp;path, <a class="code" href="class_main_window.html#a90456f979f1ce9e8f3675b031c9a430f" title="The path list of the copied images.">m_clipboard</a>) {
<a name="l00874"></a>00874             <span class="keywordtype">int</span> i = slideshow-&gt;<a class="code" href="class_slideshow.html#af814dae7340f73b195e991281f5c1e02" title="Adds an image to this slideshow according to the internal sort order.">addImage</a>(path);
<a name="l00875"></a>00875             <a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a22027ad05ba2ff041771c09ef2b18ab9" title="Adds an image to this model.">addImage</a>(<a class="code" href="class_image_info.html" title="The ImageInfo class provides information about the image location, dimension and holds a thumbnail re...">ImageInfo</a>(path), i);
<a name="l00876"></a>00876             count++;
<a name="l00877"></a>00877         }
<a name="l00878"></a>00878         <span class="comment">// refresh view</span>
<a name="l00879"></a>00879         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;update(<a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#a5ff50256571f1b76be67385c7b6a2acc" title="Returns the currently active slideshow index in this model or an invalid model index if there is no a...">currentSlideshowIndex</a>());
<a name="l00880"></a>00880         <span class="comment">//on_slideshowListView_selectionChanged(m_slideshowListModel-&gt;currentSlideshowIndex());</span>
<a name="l00881"></a>00881     } <span class="keywordflow">else</span>
<a name="l00882"></a>00882         <span class="keywordflow">return</span>;
<a name="l00883"></a>00883     <span class="comment">// clean the clipboard and disable the paste action</span>
<a name="l00884"></a>00884     <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a7dd3b1a2f35d3110ea5832e5af50c4b4" title="The copy mode of the last copy action.">m_copyMode</a> == <a class="code" href="class_main_window.html#a148edda50fa90a213e25f4310c05b3cdadd9a54979c2a41d96055a931985ad7e1" title="The cut mode.">Cut</a>) {
<a name="l00885"></a>00885         <a class="code" href="class_main_window.html#a90456f979f1ce9e8f3675b031c9a430f" title="The path list of the copied images.">m_clipboard</a>.clear();
<a name="l00886"></a>00886         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPasteImage-&gt;setEnabled(<span class="keyword">false</span>);
<a name="l00887"></a>00887     }
<a name="l00888"></a>00888     statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;%1 image(s) inserted&quot;</span>).arg(count));
<a name="l00889"></a>00889 }
<a name="l00890"></a>00890 
<a name="l00891"></a><a class="code" href="class_main_window.html#a1c1298b4b9f3fec0b582c8db643dedc8">00891</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a1c1298b4b9f3fec0b582c8db643dedc8" title="Removes the selected images from the slideshow.">MainWindow::on_actionRemoveImage_triggered</a>()
<a name="l00892"></a>00892 {
<a name="l00893"></a>00893     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l00894"></a>00894     <span class="keywordflow">if</span> (!slideshow) <span class="keywordflow">return</span>;
<a name="l00895"></a>00895     QModelIndexList indexList = <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;selectedIndexes();
<a name="l00896"></a>00896     <span class="keywordflow">foreach</span> (<span class="keyword">const</span> QModelIndex &amp;index, indexList) {
<a name="l00897"></a>00897         <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#a9db6dae42ae8d475073f4706231df322" title="Convenience method to remove an image from the active slideshow.">removeImage</a>(index);
<a name="l00898"></a>00898         <a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a745b8bb38b691285ae3db9b191fe04d6" title="Removes an image from this model.">removeImage</a>(index);
<a name="l00899"></a>00899         <span class="keywordflow">if</span> (slideshow-&gt;<a class="code" href="class_slideshow.html#a12d47ae7aa357fcb2b48c2ca49ab14d3" title="Returns the image at position index or NULL if the index is invalid.">image</a>(index.row()) == <a class="code" href="class_main_window.html#a76e434d6182490fc9ce98f5a1895d7cc" title="The associated slidehsow image of the current image.">m_currentSlideshowImage</a>)
<a name="l00900"></a>00900             <a class="code" href="class_main_window.html#a76e434d6182490fc9ce98f5a1895d7cc" title="The associated slidehsow image of the current image.">m_currentSlideshowImage</a> = NULL;
<a name="l00901"></a>00901     }
<a name="l00902"></a>00902     statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;%1 image(s) removed from slideshow \&quot;%2\&quot;&quot;</span>).arg(indexList.count()).arg(slideshow-&gt;<a class="code" href="class_slideshow.html#aa6b6334d0e760b2d664f16d3cb49e4f1" title="Returns the name of this slideshow.">name</a>()));
<a name="l00903"></a>00903 }
<a name="l00904"></a>00904 
<a name="l00905"></a><a class="code" href="class_main_window.html#abfa3e34ec476614330e2652e7a451b76">00905</a> QStringList <a class="code" href="class_main_window.html#abfa3e34ec476614330e2652e7a451b76" title="Helper method to get all image paths for the given action.">MainWindow::imagePaths</a>(QAction *action)
<a name="l00906"></a>00906 {
<a name="l00907"></a>00907     Q_ASSERT(action);
<a name="l00908"></a>00908     QWidget *widget = <a class="code" href="class_main_window.html#a02a929047009e3b2647b8a2b95244d08" title="Helper method to determine the active widget for the given action.">activeWidget</a>(action);
<a name="l00909"></a>00909     <span class="keywordflow">if</span> (!widget) <span class="keywordflow">return</span> QStringList();
<a name="l00910"></a>00910 
<a name="l00911"></a>00911     QStringList paths;
<a name="l00912"></a>00912     <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView)
<a name="l00913"></a>00913         <span class="keywordflow">foreach</span> (<span class="keyword">const</span> QModelIndex &amp;index, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;selectedIndexes())
<a name="l00914"></a>00914             paths.append(<a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#acca5cf33f8aad449a26380375e26ec38" title="Returns the image path for the item referred to by the index.">imagePath</a>(index));
<a name="l00915"></a>00915     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView)
<a name="l00916"></a>00916         <span class="keywordflow">foreach</span> (<span class="keyword">const</span> QModelIndex &amp;index, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;selectedIndexes())
<a name="l00917"></a>00917             paths.append(<a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#acca5cf33f8aad449a26380375e26ec38" title="Returns the image path for the item referred to by the index.">imagePath</a>(index));
<a name="l00918"></a>00918     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget)
<a name="l00919"></a>00919         paths.append(<a class="code" href="class_main_window.html#a557a89d5561064b42dc890ab3bb2aeb0" title="The path of the current image.">m_currentImagePath</a>);
<a name="l00920"></a>00920 
<a name="l00921"></a>00921     <span class="keywordflow">return</span> paths;
<a name="l00922"></a>00922 }
<a name="l00923"></a>00923 
<a name="l00924"></a><a class="code" href="class_main_window.html#ab5cdc7de10ad9f4f0e1924fe96ea05eb">00924</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ab5cdc7de10ad9f4f0e1924fe96ea05eb" title="Removes the selected images from the disk.">MainWindow::on_actionRemoveImageFromDisk_triggered</a>()
<a name="l00925"></a>00925 {
<a name="l00926"></a>00926     QStringList paths = <a class="code" href="class_main_window.html#abfa3e34ec476614330e2652e7a451b76" title="Helper method to get all image paths for the given action.">imagePaths</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImageFromDisk);
<a name="l00927"></a>00927     <span class="keywordflow">if</span> (QMessageBox::question(<span class="keyword">this</span>, tr(<span class="stringliteral">&quot;Remove Image(s)&quot;</span>), tr(<span class="stringliteral">&quot;Are you sure you want to remove the %1 image(s) from disk?&quot;</span>)
<a name="l00928"></a>00928             .arg(paths.count()), QMessageBox::Yes | QMessageBox::No, QMessageBox::No) == QMessageBox::Yes) {
<a name="l00929"></a>00929         QWidget *widget = <a class="code" href="class_main_window.html#a02a929047009e3b2647b8a2b95244d08" title="Helper method to determine the active widget for the given action.">activeWidget</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionRemoveImageFromDisk);
<a name="l00930"></a>00930         <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView) <span class="comment">// remove images also from slideshow</span>
<a name="l00931"></a>00931             <a class="code" href="class_main_window.html#a1c1298b4b9f3fec0b582c8db643dedc8" title="Removes the selected images from the slideshow.">on_actionRemoveImage_triggered</a>();
<a name="l00932"></a>00932         <span class="comment">// remove images from disk</span>
<a name="l00933"></a>00933         <span class="keywordflow">foreach</span> (<span class="keyword">const</span> QString &amp;path, paths)
<a name="l00934"></a>00934             <span class="keywordflow">if</span> (!QFile::remove(path))
<a name="l00935"></a>00935                 qWarning(<span class="stringliteral">&quot;File \&quot;%s\&quot; could not be removed&quot;</span>, qPrintable(path));
<a name="l00936"></a>00936         <span class="comment">// update view</span>
<a name="l00937"></a>00937         <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView)
<a name="l00938"></a>00938             <span class="keywordflow">foreach</span> (<span class="keyword">const</span> QModelIndex &amp;index, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;selectedIndexes())
<a name="l00939"></a>00939                 <a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#a745b8bb38b691285ae3db9b191fe04d6" title="Removes an image from this model.">removeImage</a>(index);
<a name="l00940"></a>00940         statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;%1 image(s) removed from disk&quot;</span>).arg(paths.count()));
<a name="l00941"></a>00941     }
<a name="l00942"></a>00942 }
<a name="l00943"></a>00943 
<a name="l00944"></a><a class="code" href="class_main_window.html#a1ee0cc698d3101760b0e9a2fa872cc93">00944</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a1ee0cc698d3101760b0e9a2fa872cc93" title="Copies the selected image paths to the system clipboard.">MainWindow::on_actionCopyPath_triggered</a>()
<a name="l00945"></a>00945 {
<a name="l00946"></a>00946     QStringList paths = <a class="code" href="class_main_window.html#abfa3e34ec476614330e2652e7a451b76" title="Helper method to get all image paths for the given action.">imagePaths</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionCopyPath);
<a name="l00947"></a>00947 
<a name="l00948"></a>00948 <span class="preprocessor">#ifdef Q_WS_WIN</span>
<a name="l00949"></a>00949 <span class="preprocessor"></span>    <span class="comment">// convert to native paths on windows</span>
<a name="l00950"></a>00950     <span class="keywordflow">for</span> (QStringList::iterator path = paths.begin(); path != paths.end(); ++path)
<a name="l00951"></a>00951         *path = QDir::toNativeSeparators(*path);
<a name="l00952"></a>00952 <span class="preprocessor">#endif</span>
<a name="l00953"></a>00953 <span class="preprocessor"></span>
<a name="l00954"></a>00954     QClipboard *clipboard = QApplication::clipboard();
<a name="l00955"></a>00955     clipboard-&gt;setText(paths.join(<span class="stringliteral">&quot;\n&quot;</span>));
<a name="l00956"></a>00956 
<a name="l00957"></a>00957     statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;%1 image path(s) copied to the clipboard&quot;</span>).arg(paths.count()));
<a name="l00958"></a>00958 }
<a name="l00959"></a>00959 
<a name="l00960"></a><a class="code" href="class_main_window.html#a20830142936e4673608268b5191f1a80">00960</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a20830142936e4673608268b5191f1a80" title="Opens the directory of the selected image or slideshow with the system file browser.">MainWindow::on_actionOpenFileLocation_triggered</a>()
<a name="l00961"></a>00961 {
<a name="l00962"></a>00962     QWidget *widget = <a class="code" href="class_main_window.html#a02a929047009e3b2647b8a2b95244d08" title="Helper method to determine the active widget for the given action.">activeWidget</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionOpenFileLocation);
<a name="l00963"></a>00963     <span class="keywordflow">if</span> (!widget) <span class="keywordflow">return</span>;
<a name="l00964"></a>00964     QString path;
<a name="l00965"></a>00965     <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView)
<a name="l00966"></a>00966         path = <a class="code" href="class_main_window.html#ad5058ef1bd3e21c5d9e7861250f56d00" title="The image list model.">m_imageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#acca5cf33f8aad449a26380375e26ec38" title="Returns the image path for the item referred to by the index.">imagePath</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageListView-&gt;currentIndex());
<a name="l00967"></a>00967     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView) {
<a name="l00968"></a>00968         <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>())
<a name="l00969"></a>00969             path = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>()-&gt;<a class="code" href="class_slideshow.html#ae1377efff646fc13a87f03921869c6e2" title="Returns the path on the file system.">path</a>(<a class="code" href="class_main_window.html#ae0e239a4ad3e3c08e0ef7907f31f1e16" title="The directory where the slideshows are stored.">m_slideshowsDirectory</a>);
<a name="l00970"></a>00970     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView)
<a name="l00971"></a>00971         path = <a class="code" href="class_main_window.html#a0bbccfd99bcfa31392956393fdda64ce" title="The slideshow image list model.">m_slideshowImageListModel</a>-&gt;<a class="code" href="class_image_list_model.html#acca5cf33f8aad449a26380375e26ec38" title="Returns the image path for the item referred to by the index.">imagePath</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;currentIndex());
<a name="l00972"></a>00972     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (widget == <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget)
<a name="l00973"></a>00973         path = <a class="code" href="class_main_window.html#a557a89d5561064b42dc890ab3bb2aeb0" title="The path of the current image.">m_currentImagePath</a>;
<a name="l00974"></a>00974     QDir dir = QDir(path);
<a name="l00975"></a>00975     dir.cdUp();
<a name="l00976"></a>00976     path = dir.path();
<a name="l00977"></a>00977     QDesktopServices::openUrl(QUrl(<span class="stringliteral">&quot;file:///&quot;</span> + path, QUrl::TolerantMode));
<a name="l00978"></a>00978 }
<a name="l00979"></a>00979 
<a name="l00980"></a><a class="code" href="class_main_window.html#a7fee5e96118f0542662ba1628c62f8f0">00980</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a7fee5e96118f0542662ba1628c62f8f0" title="Exports the selected images to the predefined images directory.">MainWindow::on_actionExportImages_triggered</a>()
<a name="l00981"></a>00981 {
<a name="l00982"></a>00982     <span class="keywordflow">if</span> (!<a class="code" href="class_options_dialog.html#ad8d5c992fff80e2515f744ab8ad3f69c" title="Checks if a directory exists or creates it if create is set to true.">OptionsDialog::checkDirectory</a>(<a class="code" href="class_main_window.html#a100e6a0d37e7269ebfefb4d8d82eabfc" title="The directory where the exported images are stored.">m_imagesDirectory</a>)) <span class="keywordflow">return</span>;
<a name="l00983"></a>00983     QStringList paths = <a class="code" href="class_main_window.html#abfa3e34ec476614330e2652e7a451b76" title="Helper method to get all image paths for the given action.">imagePaths</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionExportImages);
<a name="l00984"></a>00984     <span class="keywordflow">if</span> (paths.isEmpty()) <span class="keywordflow">return</span>;
<a name="l00985"></a>00985     <span class="keywordtype">int</span> count = 0;
<a name="l00986"></a>00986     <span class="keywordflow">foreach</span> (<span class="keyword">const</span> QString &amp;originalPath, paths) {
<a name="l00987"></a>00987         QString exportPath = QDir(<a class="code" href="class_main_window.html#a100e6a0d37e7269ebfefb4d8d82eabfc" title="The directory where the exported images are stored.">m_imagesDirectory</a>).filePath(QFileInfo(originalPath).fileName());
<a name="l00988"></a>00988         <span class="keywordflow">if</span> (QFile::copy(originalPath, exportPath))
<a name="l00989"></a>00989             count++;
<a name="l00990"></a>00990         <span class="keywordflow">else</span>
<a name="l00991"></a>00991             qWarning(<span class="stringliteral">&quot;File \&quot;%s\&quot; could not be copied to \&quot;%s\&quot;&quot;</span>, qPrintable(originalPath), qPrintable(exportPath));
<a name="l00992"></a>00992     }
<a name="l00993"></a>00993     statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;%1 of %2 image(s) copied to \&quot;%3\&quot;&quot;</span>)
<a name="l00994"></a>00994             .arg(count).arg(paths.count()).arg(QDir::toNativeSeparators(<a class="code" href="class_main_window.html#a100e6a0d37e7269ebfefb4d8d82eabfc" title="The directory where the exported images are stored.">m_imagesDirectory</a>)));
<a name="l00995"></a>00995 }
<a name="l00996"></a>00996 
<a name="l00997"></a><a class="code" href="class_main_window.html#ab1c1aa7fcd6f0d5e8e2371bf9d62ba9f">00997</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ab1c1aa7fcd6f0d5e8e2371bf9d62ba9f" title="Removes all corrupted images from the active slideshow.">MainWindow::on_actionRemoveAllCorruptedImages_triggered</a>()
<a name="l00998"></a>00998 {
<a name="l00999"></a>00999     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l01000"></a>01000     <span class="keywordflow">if</span> (slideshow) {
<a name="l01001"></a>01001         slideshow-&gt;<a class="code" href="class_slideshow.html#a21d6c5f2661495eba6453c6c66d73a0c" title="Removes all corrupted images from this slideshow.">removeAllCorruptedImages</a>();
<a name="l01002"></a>01002         <span class="comment">// refresh view</span>
<a name="l01003"></a>01003         <a class="code" href="class_main_window.html#ae1d73e923c6f5bed2c0ca6a5b79a085b" title="Changes the currently active slideshow and prepares the image list.">on_slideshowListView_selectionChanged</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;currentIndex());
<a name="l01004"></a>01004     }
<a name="l01005"></a>01005 }
<a name="l01006"></a>01006 
<a name="l01007"></a><a class="code" href="class_main_window.html#a3c3c5a3ad1ec2503a10e5da1b894b16c">01007</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a3c3c5a3ad1ec2503a10e5da1b894b16c" title="Schedules the preload of all thumbnail icons at once.">MainWindow::on_actionPreloadAllImages_triggered</a>()
<a name="l01008"></a>01008 {
<a name="l01009"></a>01009     QWidget *widget = <a class="code" href="class_main_window.html#a02a929047009e3b2647b8a2b95244d08" title="Helper method to determine the active widget for the given action.">activeWidget</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;actionPreloadAllImages);
<a name="l01010"></a>01010     <span class="keywordflow">if</span> (!widget) <span class="keywordflow">return</span>;
<a name="l01011"></a>01011     <a class="code" href="class_image_list_view.html" title="The ImageListView class provides a list view onto a ImageListModel.">ImageListView</a> *view = qobject_cast&lt;<a class="code" href="class_image_list_view.html" title="The ImageListView class provides a list view onto a ImageListModel.">ImageListView</a>*&gt;(widget);
<a name="l01012"></a>01012     <span class="keywordflow">if</span> (view) {
<a name="l01013"></a>01013         <a class="code" href="class_image_list_model.html" title="The ImageListModel class provides a model of multiple images which can be presented to the user with ...">ImageListModel</a>* model = qobject_cast&lt;<a class="code" href="class_image_list_model.html" title="The ImageListModel class provides a model of multiple images which can be presented to the user with ...">ImageListModel</a>*&gt;(view-&gt;model());
<a name="l01014"></a>01014         <span class="keywordflow">if</span> (model)
<a name="l01015"></a>01015             model-&gt;<a class="code" href="class_image_list_model.html#a40ceb5c0f48112135528e905ba30b568" title="Preloads all images in this model.">preloadAllImages</a>();
<a name="l01016"></a>01016     }
<a name="l01017"></a>01017 }
<a name="l01018"></a>01018 
<a name="l01019"></a><a class="code" href="class_main_window.html#a4ea455377aa0b26ed2c15aa716e7dcfa">01019</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a4ea455377aa0b26ed2c15aa716e7dcfa" title="Starts the active slideshow in full-screen mode.">MainWindow::on_actionStartSlideshow_triggered</a>()
<a name="l01020"></a>01020 {
<a name="l01021"></a>01021     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l01022"></a>01022     <span class="keywordflow">if</span> (!slideshow || !slideshow-&gt;<a class="code" href="class_slideshow.html#a3ff240e093a11cae71e1244a3fd7b457" title="Returns the number of images in this slideshow.">imageCount</a>())
<a name="l01023"></a>01023         <span class="keywordflow">return</span>;
<a name="l01024"></a>01024 
<a name="l01025"></a>01025     <a class="code" href="class_slideshow_window.html" title="The SlideshowWindow class provides an encapsulated ImageWidget to play a single Slideshow in automati...">SlideshowWindow</a> *slideshowWindow = <span class="keyword">new</span> <a class="code" href="class_slideshow_window.html" title="The SlideshowWindow class provides an encapsulated ImageWidget to play a single Slideshow in automati...">SlideshowWindow</a>(slideshow, <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;intervalSpinBox-&gt;value(),
<a name="l01026"></a>01026             <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;randomCheckBox-&gt;isChecked(), <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;repeatCheckBox-&gt;isChecked());
<a name="l01027"></a>01027     <a class="code" href="class_image_widget.html" title="The ImageWidget class provides a OpenGL rendered view to display a single image and text with various...">ImageWidget</a> *imageWidget = slideshowWindow-&gt;<a class="code" href="class_slideshow_window.html#a1192bb71dd0f569b4db19f8677df856f" title="Returns a pointer to the encapsulated image widget.">imageWidget</a>();
<a name="l01028"></a>01028     imageWidget-&gt;<a class="code" href="class_image_widget.html#afc208fa301a394f6fd00c0cc223cec77" title="Sets the background color of this widget.">setBackgroundColor</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;backgroundColor());
<a name="l01029"></a>01029     imageWidget-&gt;setTextBackgroundColor(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;textBackgroundColor());
<a name="l01030"></a>01030     imageWidget-&gt;setTextFont(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;textFont());
<a name="l01031"></a>01031     imageWidget-&gt;setTextColor(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;textColor());
<a name="l01032"></a>01032     imageWidget-&gt;setTextVisibility(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;imageWidget-&gt;isTextVisible());
<a name="l01033"></a>01033     slideshowWindow-&gt;showFullScreen();
<a name="l01034"></a>01034 }
<a name="l01035"></a>01035 
<a name="l01036"></a><a class="code" href="class_main_window.html#a9115b955501638d618864c4540b0bf13">01036</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a9115b955501638d618864c4540b0bf13" title="Opens a modal dialog to edit the comment of the selected slideshow.">MainWindow::on_actionSlideshowEditComment_triggered</a>()
<a name="l01037"></a>01037 {
<a name="l01038"></a>01038     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l01039"></a>01039     <span class="keywordflow">if</span> (!slideshow) <span class="keywordflow">return</span>;
<a name="l01040"></a>01040 
<a name="l01041"></a>01041     <span class="keywordtype">bool</span> ok;
<a name="l01042"></a>01042     QString comment = QInputDialog::getText(<span class="keyword">this</span>, tr(<span class="stringliteral">&quot;Edit Comment&quot;</span>), tr(<span class="stringliteral">&quot;Comment:&quot;</span>),
<a name="l01043"></a>01043                                             QLineEdit::Normal, slideshow-&gt;<a class="code" href="class_slideshow.html#aff297175e45fb79828904fd9df7e0fa7" title="Returns the comment of this slideshow.">comment</a>(), &amp;ok);
<a name="l01044"></a>01044     <span class="keywordflow">if</span> (ok)
<a name="l01045"></a>01045         slideshow-&gt;<a class="code" href="class_slideshow.html#a4d04c1072fd9220985a2e59488ac611e" title="Sets the comment of this slideshow.">setComment</a>(comment);
<a name="l01046"></a>01046 }
<a name="l01047"></a>01047 
<a name="l01048"></a><a class="code" href="class_main_window.html#a20284693feef794180cf273fad3a8a6a">01048</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a20284693feef794180cf273fad3a8a6a" title="Activates the inline rename function of the slected slideshow.">MainWindow::on_actionRenameSlideshow_triggered</a>()
<a name="l01049"></a>01049 {
<a name="l01050"></a>01050     <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;edit(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;currentIndex());
<a name="l01051"></a>01051 }
<a name="l01052"></a>01052 
<a name="l01053"></a><a class="code" href="class_main_window.html#ace9097764e7332307d137fe466b6641d">01053</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ace9097764e7332307d137fe466b6641d" title="Removes the selected slideshow from disk.">MainWindow::on_actionRemoveSlideshow_triggered</a>()
<a name="l01054"></a>01054 {
<a name="l01055"></a>01055     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l01056"></a>01056     <span class="keywordflow">if</span> (!slideshow) <span class="keywordflow">return</span>;
<a name="l01057"></a>01057     <span class="keywordflow">if</span> (QMessageBox::question(<span class="keyword">this</span>, tr(<span class="stringliteral">&quot;Remove Slideshow&quot;</span>), tr(<span class="stringliteral">&quot;Are you sure you want to remove the slideshow \&quot;%1\&quot;?&quot;</span>)
<a name="l01058"></a>01058             .arg(slideshow-&gt;<a class="code" href="class_slideshow.html#aa6b6334d0e760b2d664f16d3cb49e4f1" title="Returns the name of this slideshow.">name</a>()), QMessageBox::Yes | QMessageBox::No, QMessageBox::No) == QMessageBox::Yes) {
<a name="l01059"></a>01059         <span class="keywordflow">if</span> (slideshow == <a class="code" href="class_main_window.html#a6180c2a419c941ef42c47c19712c0828" title="The associated slidehsow of the current image.">m_currentSlideshow</a>) {
<a name="l01060"></a>01060             <a class="code" href="class_main_window.html#a6180c2a419c941ef42c47c19712c0828" title="The associated slidehsow of the current image.">m_currentSlideshow</a> = NULL;
<a name="l01061"></a>01061             <a class="code" href="class_main_window.html#a76e434d6182490fc9ce98f5a1895d7cc" title="The associated slidehsow image of the current image.">m_currentSlideshowImage</a> = NULL;
<a name="l01062"></a>01062         }
<a name="l01063"></a>01063         QString path = slideshow-&gt;<a class="code" href="class_slideshow.html#ae1377efff646fc13a87f03921869c6e2" title="Returns the path on the file system.">path</a>(<a class="code" href="class_main_window.html#ae0e239a4ad3e3c08e0ef7907f31f1e16" title="The directory where the slideshows are stored.">m_slideshowsDirectory</a>);
<a name="l01064"></a>01064         <span class="keywordflow">if</span> (<a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa1338a610c899a847e3c21fa4b6f26e9" title="Removes a slideshow from this model.">removeSlideshow</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;currentIndex()) &amp;&amp; !QFile::remove(path))
<a name="l01065"></a>01065             qWarning(<span class="stringliteral">&quot;File \&quot;%s\&quot; could not be removed&quot;</span>, qPrintable(path));
<a name="l01066"></a>01066     }
<a name="l01067"></a>01067 }
<a name="l01068"></a>01068 
<a name="l01069"></a><a class="code" href="class_main_window.html#ab8d4713b584b2790f4186e9176b0322b">01069</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ab8d4713b584b2790f4186e9176b0322b" title="Opens a modal dialog to select an existing slideshow or enter a new one and then copies all images fr...">MainWindow::on_actionCopyImagesToSlideshow_triggered</a>()
<a name="l01070"></a>01070 {
<a name="l01071"></a>01071     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshowFrom = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l01072"></a>01072     <span class="keywordflow">if</span> (!slideshowFrom) <span class="keywordflow">return</span>;
<a name="l01073"></a>01073     QStringList slideshowList;
<a name="l01074"></a>01074     <span class="keywordflow">foreach</span> (<span class="keyword">const</span> <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> &amp;slideshow, <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#a080751395b89facf716a5a4ded269a10" title="Returns the internal list of all slideshows stored in this model.">slideshowList</a>())
<a name="l01075"></a>01075         slideshowList.append(slideshow.<a class="code" href="class_slideshow.html#aa6b6334d0e760b2d664f16d3cb49e4f1" title="Returns the name of this slideshow.">name</a>());
<a name="l01076"></a>01076     <span class="keywordtype">bool</span> ok;
<a name="l01077"></a>01077     QString slideshowString = QInputDialog::getItem(<span class="keyword">this</span>, tr(<span class="stringliteral">&quot;Select Slideshow&quot;</span>),
<a name="l01078"></a>01078             tr(<span class="stringliteral">&quot;Copy all images to slideshow:&quot;</span>), slideshowList, 0, <span class="keyword">true</span>, &amp;ok);
<a name="l01079"></a>01079     <span class="keywordflow">if</span> (ok &amp;&amp; !slideshowString.isEmpty()) {
<a name="l01080"></a>01080         <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshowTo = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#a83c1528864503af77f41508cf430995d" title="Returns the slideshow referred to by the index or NULL if the index is invalid or out of bounds...">slideshow</a>(slideshowString);
<a name="l01081"></a>01081         <span class="keywordflow">if</span> (!slideshowTo) { <span class="comment">// slideshow not found, create new one</span>
<a name="l01082"></a>01082             QModelIndex slideshowIndex = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#af7235d26497949aab04f2f31e3bc62a5" title="Adds a slideshow to this model.">addSlideshow</a>(slideshowString);
<a name="l01083"></a>01083             slideshowTo = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#a83c1528864503af77f41508cf430995d" title="Returns the slideshow referred to by the index or NULL if the index is invalid or out of bounds...">slideshow</a>(slideshowIndex);
<a name="l01084"></a>01084             <span class="keywordflow">if</span> (!slideshowTo) <span class="keywordflow">return</span>; <span class="comment">// should never happen, just in case</span>
<a name="l01085"></a>01085         }
<a name="l01086"></a>01086         <span class="comment">// copy all images</span>
<a name="l01087"></a>01087         <span class="keywordflow">foreach</span> (<span class="keyword">const</span> <a class="code" href="class_slideshow_image.html" title="The SlideshowImage class defines a single image from a Slideshow.">SlideshowImage</a> &amp;image, slideshowFrom-&gt;<a class="code" href="class_slideshow.html#a1f724445ba73eb4b24718a440b958c9d" title="Returns a reference to the internal image list.">images</a>())
<a name="l01088"></a>01088             slideshowTo-&gt;<a class="code" href="class_slideshow.html#af814dae7340f73b195e991281f5c1e02" title="Adds an image to this slideshow according to the internal sort order.">addImage</a>(image);
<a name="l01089"></a>01089         statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;%1 image(s) copied from slideshow \&quot;%2\&quot; to \&quot;%3\&quot;&quot;</span>)
<a name="l01090"></a>01090                 .arg(slideshowFrom-&gt;<a class="code" href="class_slideshow.html#a3ff240e093a11cae71e1244a3fd7b457" title="Returns the number of images in this slideshow.">imageCount</a>()).arg(slideshowFrom-&gt;<a class="code" href="class_slideshow.html#aa6b6334d0e760b2d664f16d3cb49e4f1" title="Returns the name of this slideshow.">name</a>()).arg(slideshowTo-&gt;<a class="code" href="class_slideshow.html#aa6b6334d0e760b2d664f16d3cb49e4f1" title="Returns the name of this slideshow.">name</a>()));
<a name="l01091"></a>01091     }
<a name="l01092"></a>01092 }
<a name="l01093"></a>01093 
<a name="l01094"></a><a class="code" href="class_main_window.html#aa9c449d4beb5aabea76d085cef7734eb">01094</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#aa9c449d4beb5aabea76d085cef7734eb" title="Exports all images from the selected slideshow to the predefined images directory.">MainWindow::on_actionExportAllImages_triggered</a>()
<a name="l01095"></a>01095 {
<a name="l01096"></a>01096     <span class="keywordflow">if</span> (!<a class="code" href="class_options_dialog.html#ad8d5c992fff80e2515f744ab8ad3f69c" title="Checks if a directory exists or creates it if create is set to true.">OptionsDialog::checkDirectory</a>(<a class="code" href="class_main_window.html#a100e6a0d37e7269ebfefb4d8d82eabfc" title="The directory where the exported images are stored.">m_imagesDirectory</a>)) <span class="keywordflow">return</span>;
<a name="l01097"></a>01097     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l01098"></a>01098     <span class="keywordflow">if</span> (!slideshow) <span class="keywordflow">return</span>;
<a name="l01099"></a>01099     <span class="keywordtype">int</span> count = 0;
<a name="l01100"></a>01100     <span class="keywordflow">foreach</span> (<span class="keyword">const</span> <a class="code" href="class_slideshow_image.html" title="The SlideshowImage class defines a single image from a Slideshow.">SlideshowImage</a> &amp;image, slideshow-&gt;<a class="code" href="class_slideshow.html#a1f724445ba73eb4b24718a440b958c9d" title="Returns a reference to the internal image list.">images</a>()) {
<a name="l01101"></a>01101         QString originalPath = image.<a class="code" href="class_slideshow_image.html#a48d511bf0c1190ece0d3ffaab2287a65" title="Returns the absolute file path of this image.">path</a>();
<a name="l01102"></a>01102         QString exportPath = QDir(<a class="code" href="class_main_window.html#a100e6a0d37e7269ebfefb4d8d82eabfc" title="The directory where the exported images are stored.">m_imagesDirectory</a>).filePath(image.<a class="code" href="class_slideshow_image.html#a4d27f8bbd2a3e0c0e7670266591c55e1" title="Returns the file name of this image.">name</a>());
<a name="l01103"></a>01103         <span class="keywordflow">if</span> (QFile::copy(originalPath, exportPath))
<a name="l01104"></a>01104             count++;
<a name="l01105"></a>01105         <span class="keywordflow">else</span>
<a name="l01106"></a>01106             qWarning(<span class="stringliteral">&quot;File \&quot;%s\&quot; could not be copied to \&quot;%s\&quot;&quot;</span>, qPrintable(originalPath), qPrintable(exportPath));
<a name="l01107"></a>01107     }
<a name="l01108"></a>01108     statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;%1 of %2 image(s) copied to \&quot;%3\&quot;&quot;</span>)
<a name="l01109"></a>01109             .arg(count).arg(slideshow-&gt;<a class="code" href="class_slideshow.html#a3ff240e093a11cae71e1244a3fd7b457" title="Returns the number of images in this slideshow.">imageCount</a>()).arg(QDir::toNativeSeparators(<a class="code" href="class_main_window.html#a100e6a0d37e7269ebfefb4d8d82eabfc" title="The directory where the exported images are stored.">m_imagesDirectory</a>)));
<a name="l01110"></a>01110 }
<a name="l01111"></a>01111 
<a name="l01112"></a><a class="code" href="class_main_window.html#ab65c1ab9c5682fe7bf77f4327d3b23ed">01112</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ab65c1ab9c5682fe7bf77f4327d3b23ed" title="Reloads the selected slideshow from disk.">MainWindow::on_actionReloadSlideshow_triggered</a>()
<a name="l01113"></a>01113 {
<a name="l01114"></a>01114     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l01115"></a>01115     <span class="keywordflow">if</span> (slideshow)
<a name="l01116"></a>01116         <a class="code" href="class_main_window.html#a8dfe8a33a5cf8c3727d3ed6fc3ecef97" title="The slideshow file manager to load and save slideshows.">m_slideshowFileManager</a>-&gt;<a class="code" href="class_slideshow_file_manager.html#afc696819d03731f128d9a3c495859136" title="Loads a single slideshow from the file system into memory.">loadSlideshow</a>(slideshow-&gt;<a class="code" href="class_slideshow.html#ae1377efff646fc13a87f03921869c6e2" title="Returns the path on the file system.">path</a>(<a class="code" href="class_main_window.html#ae0e239a4ad3e3c08e0ef7907f31f1e16" title="The directory where the slideshows are stored.">m_slideshowsDirectory</a>));
<a name="l01117"></a>01117 }
<a name="l01118"></a>01118 
<a name="l01119"></a><a class="code" href="class_main_window.html#ad0d550f2ed2c611ae71354cc56c983a3">01119</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ad0d550f2ed2c611ae71354cc56c983a3" title="Saves the selected slideshow to disk.">MainWindow::on_actionSaveSlideshow_triggered</a>()
<a name="l01120"></a>01120 {
<a name="l01121"></a>01121     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l01122"></a>01122     <span class="keywordflow">if</span> (slideshow)
<a name="l01123"></a>01123         <a class="code" href="class_main_window.html#a8dfe8a33a5cf8c3727d3ed6fc3ecef97" title="The slideshow file manager to load and save slideshows.">m_slideshowFileManager</a>-&gt;<a class="code" href="class_slideshow_file_manager.html#afd0a31d77e3a3b3d3b9f8f937e9e7cca" title="Saves a single slideshow from memory to the file system.">saveSlideshow</a>(*slideshow, <a class="code" href="class_main_window.html#ae0e239a4ad3e3c08e0ef7907f31f1e16" title="The directory where the slideshows are stored.">m_slideshowsDirectory</a>);
<a name="l01124"></a>01124 }
<a name="l01125"></a>01125 
<a name="l01126"></a><a class="code" href="class_main_window.html#ab3d0ea432bc90ec456a163136deaf3b7">01126</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ab3d0ea432bc90ec456a163136deaf3b7" title="Reorders the image list according to the selected sort order.">MainWindow::on_imageListSortComboBox_currentIndexChanged</a>(<span class="keywordtype">int</span>)
<a name="l01127"></a>01127 {
<a name="l01128"></a>01128     <span class="comment">// rescan folder</span>
<a name="l01129"></a>01129     <a class="code" href="class_main_window.html#abffb5da22e4f345c1ea3828bdea0b4ed" title="Helper method to start the asynchronous folder scan.">scanFolder</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;folderBrowserTreeView-&gt;currentIndex(), <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;includeSubfoldersCheckBox-&gt;isChecked());
<a name="l01130"></a>01130 }
<a name="l01131"></a>01131 
<a name="l01132"></a><a class="code" href="class_main_window.html#a44b1776fa9067e492e944f270d6b9214">01132</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a44b1776fa9067e492e944f270d6b9214" title="Sets if the selected folder scan should also include all subfolders.">MainWindow::on_includeSubfoldersCheckBox_toggled</a>(<span class="keywordtype">bool</span> checked)
<a name="l01133"></a>01133 {
<a name="l01134"></a>01134     QModelIndex index = <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;folderBrowserTreeView-&gt;currentIndex();
<a name="l01135"></a>01135     <span class="keywordflow">if</span> (index.isValid())
<a name="l01136"></a>01136         <a class="code" href="class_main_window.html#abffb5da22e4f345c1ea3828bdea0b4ed" title="Helper method to start the asynchronous folder scan.">scanFolder</a>(index, checked);
<a name="l01137"></a>01137 }
<a name="l01138"></a>01138 
<a name="l01139"></a><a class="code" href="class_main_window.html#ab2cfcdcb841fa7c0a562467d1bee5c16">01139</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ab2cfcdcb841fa7c0a562467d1bee5c16" title="Reorders the image list according to the selected sort order.">MainWindow::on_slideshowSortComboBox_currentIndexChanged</a>(<span class="keywordtype">int</span> index)
<a name="l01140"></a>01140 {
<a name="l01141"></a>01141     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l01142"></a>01142     <span class="keywordflow">if</span> (!slideshow) <span class="keywordflow">return</span>;
<a name="l01143"></a>01143 
<a name="l01144"></a>01144     Qsm::SortFlags sort;
<a name="l01145"></a>01145     <span class="keywordflow">switch</span> (index) {
<a name="l01146"></a>01146     <span class="keywordflow">case</span> 0: sort = <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a9607749d725b5589f98648a8827bc0b7" title="Sort by name.">Qsm::Name</a>; <span class="keywordflow">break</span>;
<a name="l01147"></a>01147     <span class="keywordflow">case</span> 1: sort = <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a4f69f4c0a4aeb7ce497a256a2a7da46f" title="Sort by name reversed.">Qsm::NameReversed</a>; <span class="keywordflow">break</span>;
<a name="l01148"></a>01148     <span class="keywordflow">case</span> 2: sort = <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a23998ec6f15a3f4577e584de18cd9477" title="Sort by date.">Qsm::Date</a>; <span class="keywordflow">break</span>;
<a name="l01149"></a>01149     <span class="keywordflow">case</span> 3: sort = <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78adc4815d2533a1e9fcf0a48b463a18890" title="Sort by date reversed.">Qsm::DateReversed</a>; <span class="keywordflow">break</span>;
<a name="l01150"></a>01150     <span class="keywordflow">case</span> 4: sort = <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a2a39dde9273d1ab53f9d0cbac0681f97" title="Do not sort.">Qsm::Unsorted</a>; <span class="keywordflow">break</span>;
<a name="l01151"></a>01151     }
<a name="l01152"></a>01152 
<a name="l01153"></a>01153     <span class="keywordflow">if</span> (slideshow-&gt;<a class="code" href="class_slideshow.html#aa8f014f3262e9c3b3d902c1710754e93" title="Sets the sort order of the images inside this slideshow.">setSortOrder</a>(sort) &amp;&amp; !(sort &amp; <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a2a39dde9273d1ab53f9d0cbac0681f97" title="Do not sort.">Qsm::Unsorted</a>))
<a name="l01154"></a>01154         <a class="code" href="class_main_window.html#ae1d73e923c6f5bed2c0ca6a5b79a085b" title="Changes the currently active slideshow and prepares the image list.">on_slideshowListView_selectionChanged</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;currentIndex()); <span class="comment">// refresh view</span>
<a name="l01155"></a>01155 }
<a name="l01156"></a>01156 
<a name="l01157"></a><a class="code" href="class_main_window.html#ac3003733f501fbf84c620940f1b45ec3">01157</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#ac3003733f501fbf84c620940f1b45ec3" title="Helper method to move images in a slideshow by delta positions.">MainWindow::moveImages</a>(<span class="keywordtype">int</span> delta)
<a name="l01158"></a>01158 {
<a name="l01159"></a>01159     <a class="code" href="class_slideshow.html" title="The Slideshow class defines a single slideshow which contains a list of SlideshowImages.">Slideshow</a> *slideshow = <a class="code" href="class_main_window.html#a672c32afd03bb552fe049b206374c9fb" title="The slideshow list model.">m_slideshowListModel</a>-&gt;<a class="code" href="class_slideshow_list_model.html#aa63b4cddd6fd5a2aedbaf42bc8c5ccbe" title="Returns the currently active slideshow in this model or NULL if there is no active slideshow...">currentSlideshow</a>();
<a name="l01160"></a>01160     <span class="keywordflow">if</span> (!slideshow || slideshow-&gt;<a class="code" href="class_slideshow.html#a3ff240e093a11cae71e1244a3fd7b457" title="Returns the number of images in this slideshow.">imageCount</a>() &lt; 2) <span class="keywordflow">return</span>;
<a name="l01161"></a>01161 
<a name="l01162"></a>01162     QModelIndexList indexList = <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowImageListView-&gt;selectedIndexes();
<a name="l01163"></a>01163     <span class="keywordflow">if</span> (indexList.isEmpty()) <span class="keywordflow">return</span>;
<a name="l01164"></a>01164 
<a name="l01165"></a>01165     <span class="comment">// set to unsorted</span>
<a name="l01166"></a>01166     <span class="keywordflow">if</span> (!(slideshow-&gt;<a class="code" href="class_slideshow.html#a4025c20e2ad996ea33841a9307fed7bd" title="Returns the sort order of the images inside this slideshow.">sortOrder</a>() &amp; <a class="code" href="namespace_qsm.html#a5f4ed2bbf8653c08754f41d784ef2e78a2a39dde9273d1ab53f9d0cbac0681f97" title="Do not sort.">Qsm::Unsorted</a>))
<a name="l01167"></a>01167         <a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowSortComboBox-&gt;setCurrentIndex(4);
<a name="l01168"></a>01168 
<a name="l01169"></a>01169     <span class="comment">// move images</span>
<a name="l01170"></a>01170     QModelIndexList::const_iterator begin;
<a name="l01171"></a>01171     QModelIndexList::const_iterator end;
<a name="l01172"></a>01172     <span class="keywordtype">int</span> direction;
<a name="l01173"></a>01173     <span class="keywordflow">if</span> (delta &lt; 0) { <span class="comment">// move up, begin with smallest index</span>
<a name="l01174"></a>01174         begin = indexList.constBegin();
<a name="l01175"></a>01175         end = indexList.constEnd() - 1;
<a name="l01176"></a>01176         direction = 1;
<a name="l01177"></a>01177     } <span class="keywordflow">else</span> { <span class="comment">// move down, begin with largest index</span>
<a name="l01178"></a>01178         begin = indexList.constEnd() - 1;
<a name="l01179"></a>01179         end = indexList.constBegin();
<a name="l01180"></a>01180         direction = -1;
<a name="l01181"></a>01181     }
<a name="l01182"></a>01182     end += direction;
<a name="l01183"></a>01183     <span class="keywordflow">for</span> (QModelIndexList::const_iterator i = begin; i != end; i += direction) {
<a name="l01184"></a>01184         slideshow-&gt;<a class="code" href="class_slideshow.html#a8d60864a2200540740385329f934f038" title="Moves one image by delta positions.">moveImage</a>((*i).row(), delta);
<a name="l01185"></a>01185         <span class="comment">//m_slideshowImageListModel-&gt;moveImage(*i, delta); // BUG</span>
<a name="l01186"></a>01186     }
<a name="l01187"></a>01187     <span class="comment">// refresh view</span>
<a name="l01188"></a>01188     <a class="code" href="class_main_window.html#ae1d73e923c6f5bed2c0ca6a5b79a085b" title="Changes the currently active slideshow and prepares the image list.">on_slideshowListView_selectionChanged</a>(<a class="code" href="class_main_window.html#a35466a70ed47252a0191168126a352a5" title="The pointer to the UI.">ui</a>-&gt;slideshowListView-&gt;currentIndex());
<a name="l01189"></a>01189 }
<a name="l01190"></a>01190 
<a name="l01191"></a><a class="code" href="class_main_window.html#a925df1e37f2223fc0c9520df79c1a8cd">01191</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a925df1e37f2223fc0c9520df79c1a8cd" title="Moves the selected images to the begin of the list.">MainWindow::on_beginPushButton_clicked</a>()
<a name="l01192"></a>01192 {
<a name="l01193"></a>01193     <a class="code" href="class_main_window.html#ac3003733f501fbf84c620940f1b45ec3" title="Helper method to move images in a slideshow by delta positions.">moveImages</a>(INT_MIN &gt;&gt; 1);
<a name="l01194"></a>01194 }
<a name="l01195"></a>01195 
<a name="l01196"></a><a class="code" href="class_main_window.html#a858c5cd2f4322240ae2d489f8f0fed04">01196</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a858c5cd2f4322240ae2d489f8f0fed04" title="Moves the selected images multiple positions up in the list.">MainWindow::on_multipleUpPushButton_clicked</a>()
<a name="l01197"></a>01197 {
<a name="l01198"></a>01198     <a class="code" href="class_main_window.html#ac3003733f501fbf84c620940f1b45ec3" title="Helper method to move images in a slideshow by delta positions.">moveImages</a>(-<a class="code" href="class_main_window.html#a79c340813751959f56c570b07082d6b2" title="The amount of positions to move the image(s).">m_multipleMoveCount</a>);
<a name="l01199"></a>01199 }
<a name="l01200"></a>01200 
<a name="l01201"></a><a class="code" href="class_main_window.html#af953ca19bce52512628ca36bdd09327c">01201</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#af953ca19bce52512628ca36bdd09327c" title="Moves the selected images to the begin of the list.">MainWindow::on_upPushButton_clicked</a>()
<a name="l01202"></a>01202 {
<a name="l01203"></a>01203     <a class="code" href="class_main_window.html#ac3003733f501fbf84c620940f1b45ec3" title="Helper method to move images in a slideshow by delta positions.">moveImages</a>(-1);
<a name="l01204"></a>01204 }
<a name="l01205"></a>01205 
<a name="l01206"></a><a class="code" href="class_main_window.html#a574bf8c0e6cd1bf86d613969dadb3f8d">01206</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a574bf8c0e6cd1bf86d613969dadb3f8d" title="Moves the selected images one position down in the list.">MainWindow::on_downPushButton_clicked</a>()
<a name="l01207"></a>01207 {
<a name="l01208"></a>01208     <a class="code" href="class_main_window.html#ac3003733f501fbf84c620940f1b45ec3" title="Helper method to move images in a slideshow by delta positions.">moveImages</a>(1);
<a name="l01209"></a>01209 }
<a name="l01210"></a>01210 
<a name="l01211"></a><a class="code" href="class_main_window.html#a1bc6fdba05e59656d1a1b51d4b772fcd">01211</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a1bc6fdba05e59656d1a1b51d4b772fcd" title="Moves the selected images multiple positions down in the list.">MainWindow::on_multipleDownPushButton_clicked</a>()
<a name="l01212"></a>01212 {
<a name="l01213"></a>01213     <a class="code" href="class_main_window.html#ac3003733f501fbf84c620940f1b45ec3" title="Helper method to move images in a slideshow by delta positions.">moveImages</a>(<a class="code" href="class_main_window.html#a79c340813751959f56c570b07082d6b2" title="The amount of positions to move the image(s).">m_multipleMoveCount</a>);
<a name="l01214"></a>01214 }
<a name="l01215"></a>01215 
<a name="l01216"></a><a class="code" href="class_main_window.html#a2020ee27ee59dff0bc413968f1c554a5">01216</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a2020ee27ee59dff0bc413968f1c554a5" title="Moves the selected images to the end of the list.">MainWindow::on_endPushButton_clicked</a>()
<a name="l01217"></a>01217 {
<a name="l01218"></a>01218     <a class="code" href="class_main_window.html#ac3003733f501fbf84c620940f1b45ec3" title="Helper method to move images in a slideshow by delta positions.">moveImages</a>(INT_MAX &gt;&gt; 1);
<a name="l01219"></a>01219 }
<a name="l01220"></a>01220 
<a name="l01221"></a><a class="code" href="class_main_window.html#a95cc4f2efeb71df6c783271580400923">01221</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a95cc4f2efeb71df6c783271580400923" title="Shows a modal dialog to select the multiple move count.">MainWindow::multipleMoveCountDialog</a>()
<a name="l01222"></a>01222 {
<a name="l01223"></a>01223     <span class="keywordtype">bool</span> ok;
<a name="l01224"></a>01224     <span class="keywordtype">int</span> moveCount = QInputDialog::getInt(<span class="keyword">this</span>, tr(<span class="stringliteral">&quot;Select Multiple Move Count&quot;</span>),
<a name="l01225"></a>01225             tr(<span class="stringliteral">&quot;Move Count:&quot;</span>), <a class="code" href="class_main_window.html#a79c340813751959f56c570b07082d6b2" title="The amount of positions to move the image(s).">m_multipleMoveCount</a>, 2, INT_MAX / 2, 1, &amp;ok);
<a name="l01226"></a>01226     <span class="keywordflow">if</span> (ok)
<a name="l01227"></a>01227         <a class="code" href="class_main_window.html#a79c340813751959f56c570b07082d6b2" title="The amount of positions to move the image(s).">m_multipleMoveCount</a> = moveCount;
<a name="l01228"></a>01228 }
<a name="l01229"></a>01229 
<a name="l01230"></a><a class="code" href="class_main_window.html#a7df0302c4530dccadb70fc92a84ba232">01230</a> <span class="keywordtype">void</span> <a class="code" href="class_main_window.html#a7df0302c4530dccadb70fc92a84ba232" title="Changes the font size of the application.">MainWindow::wheelEvent</a>(QWheelEvent *event)
<a name="l01231"></a>01231 {
<a name="l01232"></a>01232     <span class="keywordflow">if</span> (event-&gt;modifiers() &amp; Qt::ControlModifier) {
<a name="l01233"></a>01233         QFont font = qApp-&gt;font();
<a name="l01234"></a>01234         <span class="keywordtype">int</span> delta = <span class="keyword">event</span>-&gt;delta() / 120;
<a name="l01235"></a>01235         <span class="keywordtype">int</span> pointSize = qBound(6, font.pointSize() + delta, 72);
<a name="l01236"></a>01236         font.setPointSize(pointSize);
<a name="l01237"></a>01237         qApp-&gt;setFont(font);
<a name="l01238"></a>01238         statusBar()-&gt;showMessage(tr(<span class="stringliteral">&quot;Changed font size to %1 points&quot;</span>).arg(pointSize));
<a name="l01239"></a>01239         <span class="keyword">event</span>-&gt;accept();
<a name="l01240"></a>01240     }
<a name="l01241"></a>01241 }
</pre></div></div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Sat May 28 2011 11:48:11 for Qt Slideshow Manager (QSM) by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </small></address>
</body>
</html>
